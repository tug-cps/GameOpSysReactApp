(this["webpackJsonpgameopsys-react-app"]=this["webpackJsonpgameopsys-react-app"]||[]).push([[0],{245:function(e,t,n){},295:function(e,t,n){var c={"./de/translation.json":[304,4],"./en/translation.json":[305,5]};function a(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(c)},a.id=295,e.exports=a},296:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=(n(245),n(15)),o=n(8),i=n(378),s=n(380),l=n(395),u=n(377),j=n(408),d=n(31),b=n(142),O=n(385),h=n(382),x=n(0);function f(e){var t,n,c=null!==(t=e.severity)&&void 0!==t?t:"error",a=null!==(n=e.autoHideDuration)&&void 0!==n?n:3e3;return Object(x.jsx)(O.a,{anchorOrigin:{horizontal:"center",vertical:"bottom"},open:e.open,autoHideDuration:a,onClose:e.onClose,children:Object(x.jsx)(h.a,{variant:"filled",onClose:e.onClose,severity:c,children:e.message})})}var p=n(399),v=n(386),m=n(400),g=n(401),k=n(402),y=n(406),_=n(229),w=n(350),C=n(349),S=n(409),A=n(303),T=n(403),E=n(404),W=n(407),F=n(396),M=n(345),D=n(135),B=n.n(D),I=n(102),P=n.n(I),L=n(134),K=n.n(L),R=n(137),z=n.n(R),U=n(203),N=n.n(U),q=n(138),G=n.n(q),H=n(136),J=n.n(H),V={home:{title:"home_link",subtitle:"",icon:N.a,to:"/"},upload:{title:"card_upload_title",subtitle:"card_upload_subtitle",icon:P.a,to:"/upload"},behavior:{title:"card_behavior_title",subtitle:"card_behavior_subtitle",icon:K.a,to:"/behavior"},thermostats:{title:"card_thermostats_title",subtitle:"card_thermostats_subtitle",icon:B.a,to:"/thermostats"},user:{title:"card_user_title",subtitle:"card_user_subtitle",icon:M.a,to:"/user"},power:{title:"card_power_title",subtitle:"card_power_subtitle",icon:J.a,to:"/power"},archive:{title:"card_archive_title",subtitle:"card_archive_subtitle",icon:z.a,to:"/archive"},mood:{title:"card_well_being_title",subtitle:"card_well_being_subtitle",icon:G.a,to:"/wellBeing"}};var Y=240,Q=a.a.memo((function(){var e=Object(F.a)().t,t=function(){switch(Object(c.useContext)(Ac).type){case"student":return[V.home,V.behavior,V.user];case"homeowner":return[V.home,V.upload,V.behavior,V.user];default:return[V.home,V.user]}}();return Object(x.jsx)(p.a,{component:"nav",sx:{flexShrink:{sm:0},width:{sm:Y}},children:Object(x.jsx)(v.a,{smDown:!0,children:Object(x.jsx)(m.a,{open:!0,variant:"persistent",children:Object(x.jsxs)(p.a,{role:"presentation",sx:{width:Y},children:[Object(x.jsx)(g.a,{}),Object(x.jsx)(k.a,{}),Object(x.jsx)(T.a,{disablePadding:!0,children:t.map((function(t){return Object(x.jsxs)(E.a,{button:!0,component:d.b,to:t.to,children:[Object(x.jsx)(y.a,{children:Object(x.jsx)(_.a,{component:t.icon})}),Object(x.jsx)(W.a,{primary:e(t.title)})]},t.title)}))})]})})})})}),(function(){return!0}));function X(e){return Object(x.jsxs)(p.a,{sx:{flexGrow:1},children:[Object(x.jsx)(g.a,{}),Object(x.jsx)(a.a.Suspense,{fallback:Object(x.jsx)(j.a,{}),children:e.children})]})}function $(e){return Object(x.jsx)(p.a,{sx:{display:"flex"},children:e.children})}var Z={ml:{sm:"".concat(Y,"px")},width:{sm:"calc(100% - ".concat(Y,"px)")}};function ee(e){var t=e.title,n=Object(w.a)();return Object(x.jsx)(C.a,{appear:!1,direction:"down",in:!n,children:Object(x.jsx)(S.a,{sx:Z,children:Object(x.jsxs)(g.a,{children:[Object(x.jsx)(A.a,{color:"inherit",variant:"h6",children:t}),Object(x.jsx)(p.a,{mx:"auto"}),e.children]})})})}var te=n(30),ne=n(346),ce=n(397),ae=n(410),re=n(411),oe=n(36);var ie=function(){var e=Object(oe.h)(),t=Object(F.a)().t,n=a.a.useState(0),r=Object(o.a)(n,2),i=r[0],s=r[1],l=Object(te.a)(),u=Object(ne.a)(l.breakpoints.down("sm")),j=function(){switch(Object(c.useContext)(Ac).type){case"student":return[V.home,V.behavior,V.user];case"homeowner":return[V.home,V.upload,V.behavior,V.user];default:return[V.home,V.user]}}();return u?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{sx:{marginTop:"60px"}}),Object(x.jsx)(ce.a,{sx:{width:"100%",position:"fixed",bottom:0,overflow:"hidden",zIndex:100},elevation:5,children:Object(x.jsx)(ae.a,{value:i,onChange:function(t,n){s(n);var c=j[n];null!=c&&e.push(c.to)},showLabels:!0,children:j.map((function(e){return Object(x.jsx)(re.a,{id:e.title,label:t(e.title),icon:Object(x.jsx)(_.a,{component:e.icon})})}))})})]}):null},se=n(208),le=n.n(se),ue=n(412),je=n(398),de=n(351);function be(e){var t=Object(te.a)(),n=Object(ne.a)(t.breakpoints.down("sm"));return Object(x.jsxs)(ue.a,{open:e.open,onClose:e.onClose,fullScreen:n,children:[n&&Object(x.jsx)(S.a,{children:Object(x.jsxs)(g.a,{children:[Object(x.jsx)(je.a,{color:"inherit",edge:"start",onClick:e.onClose,sx:{marginRight:2},size:"large",children:Object(x.jsx)(le.a,{})}),Object(x.jsx)(A.a,{variant:"h6",children:e.title})]})}),Object(x.jsx)(de.a,{children:e.title}),e.children]})}var Oe=n(413),he=n(414),xe=n(415),fe=n(389),pe=function(e){var t=Object(F.a)().t;return Object(x.jsxs)(be,{title:t("confirm_title"),open:e.open,onClose:e.onClose,children:[Object(x.jsx)(Oe.a,{children:Object(x.jsx)(he.a,{children:e.message})}),Object(x.jsxs)(xe.a,{children:[Object(x.jsx)(fe.a,{onClick:e.onClose,children:t("dialog_button_cancel")}),Object(x.jsx)(fe.a,{onClick:e.onAccept,children:t("dialog_button_ok")})]})]})};function ve(){var e=Object(c.useState)({open:!1}),t=Object(o.a)(e,2),n=t[0],a=t[1];return[{open:n.open,onClose:function(){return a((function(e){return Object(r.a)(Object(r.a)({},e),{},{open:!1})}))},message:n.message},Object(c.useCallback)((function(e){return"string"===typeof e?a({open:!0,message:e}):e.response?e.response.data.title?void a({open:!0,message:e.response.data.title}):a({open:!0,message:e.response.statusText}):a({open:!0,message:e.message})}),[])]}var me=n(224),ge=n(352),ke=n(115),ye=n.n(ke),_e=n(19),we=n(20),Ce=function(){function e(t,n){Object(_e.a)(this,e),this.resolve=t,this.reject=n}return Object(we.a)(e,[{key:"ok",value:function(e){console.log("FAKEBACKEND Resolving call with OK",e),this.resolve({data:e,status:200,statusText:"OK",headers:{},config:{},request:{}})}},{key:"error",value:function(e){var t,n;console.log("FAKEBACKEND Resolving call with Error"),this.reject({response:{data:{},status:null!==(t=null===e||void 0===e?void 0:e.status)&&void 0!==t?t:400,statusText:null!==(n=null===e||void 0===e?void 0:e.statusText)&&void 0!==n?n:"BAD REQUEST",headers:{},config:{},request:{}}})}}]),e}(),Se=function(){function e(t){Object(_e.a)(this,e),this.executor=t}return Object(we.a)(e,[{key:"ok",value:function(e){Math.random()>.6?this.executor.ok(e):this.executor.error()}},{key:"error",value:function(e){this.executor.error(e)}}]),e}(),Ae=n(5),Te=n(21);function Ee(){var e=localStorage.getItem("fake_db");if(null==e){var t=["user@test.com","homeowner@test.com","faultyuser@test.com","faultyhomeowner@test.com"];e=JSON.stringify({location:{location_1:{name:"greenbox COOLCITY"}},user:{"user@test.com":{id:"user1",email:"user@test.com",location:"greenbox COOLCITY",type:"student"},"homeowner@test.com":{id:"user4",email:"homeowner@test.com",location:"location_1",type:"homeowner"},"faultyuser@test.com":{id:"faultyuser",email:"faultyuser@test.com",location:"greenbox COOLCITY",type:"student"},"faultyhomeowner@test.com":{id:"faultyhomeowner",email:"faultyhomeowner@test.com",location:"location_1",type:"homeowner"}},consumer:Object.assign.apply(Object,[{}].concat(Object(Te.a)(t.map((function(e){return Object(Ae.a)({},e,[{type:"laundry"},{type:"cooking"},{type:"dishes"},{type:"hygiene"},{type:"entertainment"},{type:"wellness"},{type:"homeoffice"},{type:"emobility"},{type:"temperature"},{type:"high"},{type:"med"},{type:"low"}].map((function(e,t){return{id:t.toString(),type:e.type,active:!0}})))}))))),predictions:Object.assign.apply(Object,[{}].concat(Object(Te.a)(t.map((function(e){return Object(Ae.a)({},e,{"2021-01-10":{validated:!1,data:[]},"2021-01-04":{validated:!0,data:[]},"2021-01-02":{validated:!1,data:[]},"2021-01-01":{validated:!0,data:[]}})}))))),mood:Object.assign.apply(Object,[{}].concat(Object(Te.a)(t.map((function(e){return Object(Ae.a)({},e,{})}))))),token:{"fakeToken.thistokenisfake":"user@test.com","fakeToken.thistokenisfake4":"homeowner@test.com","fakeToken.thistokenisfake5":"faultyuser@test.com","fakeToken.thistokenisfake6":"faultyhomeowner@test.com"}}),localStorage.setItem("fake_db",e)}return JSON.parse(e)}function We(e){localStorage.setItem("fake_db",JSON.stringify(e))}function Fe(e,t){for(var n in e)if(t(e[n]))return n;return null}function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.then((function(e){return new Promise((function(n){return setTimeout((function(){return n(e)}),t)}))})).catch((function(e){return new Promise((function(n,c){return setTimeout((function(){return c(e)}),t)}))}))}var De,Be=function(){function e(){Object(_e.a)(this,e)}return Object(we.a)(e,[{key:"get",value:function(e,t){return Me(new Promise((function(n,c){var a=new Ce(n,c);if(console.log("FAKEBACKEND GET Fake backend call to ".concat(e),t),!t)return a.error();var r=Ee();if(e.endsWith("/request-pin")){var o=t.params,i=o.code,s=o.email;return"test"===i&&r.user[s]?a.ok({}):a.error()}if(e.endsWith("/login")){var l=t.params,u=l.email,j=l.otp;return null!=r.user[u]&&"123456"===j?a.ok({data:{token:Fe(r.token,(function(e){return e===u}))}}):a.error()}if(!t.headers)return a.error();var d=t.headers.Authorization,b=r.token[d];if(null==b)return a.error();if(r.user[b].id.startsWith("faulty")&&(a=new Se(a)),e.endsWith("/logout"))localStorage.removeItem("fake_db"),a.ok({});else if(e.endsWith("/user"))a.ok({data:r.user[b]});else if(e.endsWith("/consumers"))a.ok({data:r.consumer[b]});else if(e.endsWith("/predictions"))a.ok({data:Object.keys(r.predictions[b]).map((function(e){return{validated:r.predictions[b][e].validated,date:e}}))});else if(e.includes("/predictions/")){var O=e.substring(e.lastIndexOf("/")+1),h=r.predictions[b][O];if(console.log(r.predictions[b]),!h)return a.error({status:404,statusText:"Not found"});a.ok({data:h})}else if(e.includes("/available-energy/"))a.ok({data:[0,.1,.1,.1,.1,.2,.2,.4,.5,.6,.7,.8,1,1,.8,.6,.6,.4,.3,.5,.7,.3,0,0]});else if(e.includes("/well-being/")){var x=e.substring(e.lastIndexOf("/")+1),f=r.mood[b][x];if(!f)return a.error({status:404});a.ok({data:f})}else e.endsWith("/tasks")?a.ok({data:{todoPrediction:!0,todoVerifyPrediction:!0,todoUpload:!0,todoWellBeing:!0}}):e.includes("/feedback/")?a.ok({data:{totalUsage:{self:4,others:3.6},relativeUsage:{high:.25,med:.35,low:.4}}}):a.error()})))}},{key:"post",value:function(e,t,n){var c=new Promise((function(c,a){var r=new Ce(c,a);if(console.log("FAKEBACKEND POST Fake backend call to ".concat(e),n),!n)return r.error();var o=Ee();if(e.endsWith("/tracking"))return console.log("FAKEBACKEND Tracking data:",t),r.ok({});if(!n.headers)return r.error();var i=n.headers.Authorization,s=o.token[i];if(null==s)return r.error();if(o.user[s].id.startsWith("faulty")&&(r=new Se(r)),e.endsWith("/consumptions"))r.ok({});else if(e.startsWith("/well-being")){var l=(new Date).toISOString().slice(0,10);o.mood[s][l]=t.data,We(o),r.ok({})}r.error()}));return e.endsWith("/consumptions")?Me(c,3e3):Me(c)}},{key:"put",value:function(e,t,n){return Me(new Promise((function(c,a){var r=new Ce(c,a);if(console.log("FAKEBACKEND PUT Fake backend call to ".concat(e),"config:",n,"data:",t),!(null===n||void 0===n?void 0:n.headers))return r.error();var o=Ee(),i=n.headers.Authorization,s=o.token[i];if(null==s)return r.error();if(o.user[s].id.startsWith("faulty")&&(r=new Se(r)),null==e.split("/").pop())return r.error();if(e.startsWith("/predictions")){var l=e.substring(e.lastIndexOf("/")+1);o.predictions[s][l]={validated:!0,data:t.data},We(o),r.ok({})}else r.error()})))}},{key:"patch",value:function(e,t,n){return Me(new Promise((function(c,a){var o=new Ce(c,a);if(console.log("FAKEBACKEND PATCH Fake backend call to ".concat(e),"config:",n,"data:",t),!(null===n||void 0===n?void 0:n.headers))return o.error();var i=Ee(),s=n.headers.Authorization,l=i.token[s];if(null==l)return o.error();i.user[l].id.startsWith("faulty")&&(o=new Se(o));var u=e.split("/").pop();if(null==u)return o.error();if(e.startsWith("/consumers")){var j=t.data.active;!function(e,t,n){var c=e.findIndex(t);e[c]=Object(r.a)(Object(r.a)({},e[c]),n)}(i.consumer[l],(function(e){return e.id.toString()===u.toString()}),{active:j}),We(i),o.ok({})}else o.error()})))}}]),e}();ye.a.create({baseURL:"https://ansers.uni-graz.at:443/v2/"}),ye.a.create({baseURL:"https://ansers.uni-graz.at:443/v2/"});De={backend:new Be,type:"local",apiDescription:"fakeApi"};var Ie=Object(r.a)({},De),Pe=n(353),Le=n(355),Ke=n(356),Re=n(357),ze=n(420),Ue=n(354),Ne=n(225),qe=n(416),Ge=n(417),He=n(418),Je=n(419);function Ve(e){var t,n=e.to,c=e.icon,a=e.title,r=e.subtitle,o=e.done;return Object(x.jsxs)(qe.a,{sx:{borderColor:o?void 0:"warning.main",display:"flex",flexDirection:"row"},children:[Object(x.jsx)(Ge.a,{component:d.b,to:n,children:Object(x.jsxs)(p.a,{sx:{display:"flex",flexGrow:1},children:[Object(x.jsx)(He.a,{sx:{backgroundColor:o?"secondary.main":"warning.main",display:"flex",alignItems:"center",padding:"8px"},children:Object(x.jsx)(_.a,{component:c,sx:{color:"background.paper"}})}),Object(x.jsxs)(Je.a,{children:[Object(x.jsx)(A.a,{variant:"h6",children:a}),Object(x.jsx)(A.a,{color:"textSecondary",noWrap:!0,children:r})]})]})}),e.secondaryTo&&Object(x.jsx)(je.a,{component:d.b,to:e.secondaryTo,size:"large",sx:{alignSelf:"center",m:1},children:Object(x.jsx)(_.a,{component:null!==(t=e.secondaryIcon)&&void 0!==t?t:Pe.a})})]})}function Ye(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return[{open:n,onClose:function(){return a(!1)}},Object(c.useCallback)((function(){return a(!0)}),[])]}function Qe(e){return Object(x.jsxs)(be,{title:e.title,open:e.open,onClose:e.onClose,children:[Object(x.jsx)(Oe.a,{children:e.content}),Object(x.jsx)(xe.a,{children:Object(x.jsx)(fe.a,{onClick:e.onClose,children:"OK"})})]})}var Xe=n(390),$e=n(379);function Ze(e){return Object(x.jsx)(Xe.a,{invisible:!e.requiresAttention,variant:"dot",color:"info",children:e.icon})}function et(e){return Object(x.jsx)($e.a,{title:e.description,children:Object(x.jsx)(je.a,{color:"inherit",onClick:e.onClick,size:"large",children:Object(x.jsx)(Ze,Object(r.a)({},e))})})}function tt(e){return Object(x.jsx)(fe.a,{startIcon:Object(x.jsx)(Ze,Object(r.a)({},e)),color:"inherit",onClick:e.onClick,children:e.description})}var nt=function(e){var t=Object(te.a)();return Object(ne.a)(t.breakpoints.down("sm"))?Object(x.jsx)(et,Object(r.a)({},e)):Object(x.jsx)(tt,Object(r.a)({},e))};var ct=function(e){var t=Object(F.a)().t;return Object(x.jsx)(ze.a,{maxWidth:"sm",children:Object(x.jsxs)(ce.a,{variant:"outlined",square:!0,sx:{p:2,mt:3,display:"flex",flexDirection:"column"},children:[Object(x.jsx)(A.a,{children:t("error_please_retry")}),Object(x.jsx)(fe.a,{sx:{mt:5,alignSelf:"flex-end"},onClick:e.retry,children:t("retry")})]})})};function at(e,t){var n=Object(c.useContext)(Ac),a=function(e){var t;return Object(r.a)(Object(r.a)({},e),{},{date:new Date,user:null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"unknown"})},o=Object(b.useTracking)(a(e),function(e){return Object(r.a)(Object(r.a)({},e),{},{dispatchOnMount:!0})}(t)),i=o.Track,s=o.trackEvent;return{Track:i,trackEvent:function(e){return s(a(e))},getTrackingData:o.getTrackingData}}var rt=function(e){var t=at({page:"Archive"}).Track,n=Ye(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(c.useState)(!0),h=Object(o.a)(O,2),p=h[0],v=h[1],m=Object(F.a)().t,g=ve(),k=Object(o.a)(g,2),y=k[0],_=k[1],w=e.backendService,C=e.setAppBar,S=!p&&!d,A=Object(c.useCallback)((function(){v(!0),w.getPredictions().then(b,_).catch(console.log).finally((function(){return v(!1)}))}),[w,_]);Object(c.useEffect)(A,[A]),Object(c.useEffect)((function(){C({title:m("card_archive_title"),children:function(){return Object(x.jsx)(nt,{description:m("info"),icon:Object(x.jsx)(Pe.a,{}),onClick:s})}})}),[m,C,s]);var T=function(){var e=m("info_archive",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))})};return Object(x.jsxs)(t,{children:[p&&Object(x.jsx)(j.a,{}),S&&Object(x.jsx)(ct,{retry:A}),d&&Object(x.jsx)(ze.a,{maxWidth:"sm",sx:{pt:1},children:Object(x.jsx)(Ue.a,{spacing:1,children:d.map((function(e){var t=Object(Ne.a)(e.date,"yyyy-MM-dd",new Date),n=e.validated;return Object(x.jsx)(Ve,{to:"/pastbehavior?date=".concat(e.date),icon:n?Le.a:Ke.a,title:m("archive_entry_date",{date:t}),subtitle:m(m(n?"archive_already_done":"archive_please_check")),done:n,secondaryTo:n&&"/feedback?date=".concat(e.date)||void 0,secondaryIcon:n&&Re.a||void 0})}))})}),Object(x.jsx)(Qe,Object(r.a)({title:m("info"),content:Object(x.jsx)(T,{})},i)),Object(x.jsx)(f,Object(r.a)({},y))]})},ot=n(55),it=n.n(ot),st=n(391),lt=n(423),ut=n(424),jt=n(425),dt=n(422),bt=n(421),Ot=n(426),ht=n(29),xt=n(28),ft=function(e,t){return e.selected===t.selected&&e.beingSelected===t.beingSelected},pt=a.a.memo((function(e){var t=e.beingSelected,n=e.selected,a=e.onTouchStart,r=e.onTouchMove,o=e.colorSelected,i=e.colorBeingSelected,s=Object(c.useRef)(),l=function(){var e=Object(c.useContext)(Tc),t=Object(ne.a)("(prefers-color-scheme: dark)");return e.mode?"dark"===e.mode:t}()?"grey.800":"grey.400";if(Object(c.useEffect)((function(){var e=s.current;if(e)return e.addEventListener("touchstart",a,{passive:!1}),e.addEventListener("touchmove",r,{passive:!1}),function(){e.removeEventListener("touchstart",a),e.removeEventListener("touchmove",r)}}),[r,a,s]),t)return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l,backgroundColor:null!==i&&void 0!==i?i:"primary.main"},onMouseDown:a,onMouseMove:r});if(0===n)return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l},onMouseDown:a,onMouseMove:r});if(4===n)return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l,backgroundColor:null!==o&&void 0!==o?o:"secondary.main"},onMouseDown:a,onMouseMove:r});var u=100-25*n;return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l,backgroundImage:"linear-gradient(transparent ".concat(u,"%, ").concat(null!==o&&void 0!==o?o:"#9ccc65"," ").concat(u,"%);")},onMouseDown:a,onMouseMove:r})}),ft);function vt(e){var t,n,c,a;if(e.touches){var r=e.touches[0];a=document.elementFromPoint(r.clientX,r.clientY)}else for(a=e.target;"TD"!==a.tagName;)a=a.parentNode;return{row:(null===(t=a)||void 0===t||null===(n=t.parentNode)||void 0===n?void 0:n.rowIndex)-2,column:(null===(c=a)||void 0===c?void 0:c.cellIndex)-1}}var mt=function(e,t){return[Math.min(e,t),Math.max(e,t)]},gt=function(e){return 0===e.button||"mousedown"!==e.type},kt=function(e){Object(ht.a)(n,e);var t=Object(xt.a)(n);function n(e){var c;return Object(_e.a)(this,n),(c=t.call(this,e)).handleTouchStartCell=function(e){if(!c.props.readonly&&(!c.state.selectionStarted&&gt(e))){e.preventDefault();var t=vt(e),n=t.row,a=t.column;void 0!==n&&void 0!==a&&c.setState({selectionStarted:!0,startRow:n,startColumn:a,endRow:n,endColumn:a,addMode:!c.props.rows[n].cellStates[a]})}},c.handleTouchMoveCell=function(e){var t=c.state,n=t.selectionStarted,a=t.endRow,r=t.endColumn;if(n){e.preventDefault();var o=vt(e),i=o.row,s=o.column;void 0!==i&&void 0!==s&&(a===i&&r===s||c.setState({endRow:i,endColumn:s}))}},c.handleTouchEndWindow=function(e){var t=c.state,n=t.selectionStarted,a=t.startRow,r=t.endRow,i=t.startColumn,s=t.endColumn,l=t.addMode;if(n&&gt(e)){var u=c.props.rows.map((function(e){return Object.assign([],e.cellStates)})),j=mt(a,r),d=Object(o.a)(j,2),b=d[0],O=d[1],h=mt(i,s),x=Object(o.a)(h,2),f=x[0],p=x[1];if(b===O&&f===p)u[b][p]=(u[b][p]+1)%5;else for(var v=b;v<=O;v++)for(var m=f;m<=p;m++)u[v][m]=l?4:0;c.setState({selectionStarted:!1}),c.props.onChange(u)}},c.isCellBeingSelected=function(e,t){var n=c.state,a=n.selectionStarted,r=n.startRow,i=n.endRow,s=n.startColumn,l=n.endColumn;if(!a)return!1;var u=mt(r,i),j=Object(o.a)(u,2),d=j[0],b=j[1],O=mt(s,l),h=Object(o.a)(O,2),x=h[0],f=h[1];return e>=d&&e<=b&&t>=x&&t<=f},c.state={selectionStarted:!1,startRow:0,startColumn:0,endRow:0,endColumn:0,addMode:!1},c}return Object(we.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleTouchEndWindow),window.addEventListener("touchend",this.handleTouchEndWindow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleTouchEndWindow),window.removeEventListener("touchend",this.handleTouchEndWindow)}},{key:"render",value:function(){var e=this,t=this.props.rows;return Object(x.jsx)(x.Fragment,{children:t.map((function(t,n){return Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{children:t.header,sx:{position:"sticky",left:0,backgroundColor:"background.paper",border:0}}),t.cellStates.map((function(c,a){return Object(x.jsx)(pt,{beingSelected:e.isCellBeingSelected(n,a),selected:c,onTouchStart:e.handleTouchStartCell,onTouchMove:e.handleTouchMoveCell,colorSelected:t.colorSelected,colorBeingSelected:t.colorBeingSelected})}))]})}))})}}]),n}(a.a.Component),yt=n(358),_t=n(96),wt=n(95),Ct=n(176);function St(e){var t=Object(Ct.decomposeColor)(e>=.5?yt.a[500]:_t.a[500]),n=Object(Ct.decomposeColor)(e>=.5?wt.a[500]:yt.a[500]);e=2*(e>=.5?e-.5:e);var c=t.values.map((function(t,c){return Math.floor(t+(n.values[c]-t)*e)})),a=Object(o.a)(c,3),r=a[0],i=a[1],s=a[2];return"rgb(".concat(r,", ").concat(i,", ").concat(s,")")}var At=n(212),Tt=n.n(At),Et=n(215),Wt=n.n(Et),Ft=n(211),Mt=n.n(Ft),Dt=n(120),Bt=n.n(Dt),It=n(209),Pt=n.n(It),Lt=n(213),Kt=n.n(Lt),Rt=n(216),zt=n.n(Rt),Ut=n(210),Nt=n.n(Ut),qt=n(214),Gt=n.n(qt),Ht=n(93),Jt=n(359),Vt=n(94),Yt=n(360),Qt=n(361),Xt={laundry:{icon:Object(x.jsx)(Pt.a,{}),tKey:"consumer_type_laundry",color:Ht.a[500],colorAlt:Ht.a[400]},cooking:{icon:Object(x.jsx)(Nt.a,{}),tKey:"consumer_type_cooking",color:Jt.a[500],colorAlt:Jt.a[400]},dishes:{icon:Object(x.jsx)(Mt.a,{}),tKey:"consumer_type_dishes",color:Vt.a[500],colorAlt:Vt.a[400]},hygiene:{icon:Object(x.jsx)(Tt.a,{}),tKey:"consumer_type_hygiene",color:Ht.a[500],colorAlt:Ht.a[400]},entertainment:{icon:Object(x.jsx)(Kt.a,{}),tKey:"consumer_type_entertainment",color:Yt.a[500],colorAlt:Yt.a[400]},wellness:{icon:Object(x.jsx)(Gt.a,{}),tKey:"consumer_type_wellness",color:_t.a[500],colorAlt:_t.a[400]},homeoffice:{icon:Object(x.jsx)(Wt.a,{}),tKey:"consumer_type_homeoffice",color:wt.a[500],colorAlt:wt.a[400]},emobility:{icon:Object(x.jsx)(zt.a,{}),tKey:"consumer_type_emobility",color:Ht.a[500],colorAlt:Ht.a[400]},temperature:{icon:Object(x.jsx)(B.a,{}),tKey:"consumer_type_temperature",color:Jt.a[500],colorAlt:Jt.a[400]},high:{icon:Object(x.jsx)(Bt.a,{}),tKey:"consumer_type_high",color:wt.a[500],colorAlt:wt.a[400]},med:{icon:Object(x.jsx)(Bt.a,{}),tKey:"consumer_type_med",color:Qt.a[500],colorAlt:Qt.a[400]},low:{icon:Object(x.jsx)(Bt.a,{}),tKey:"consumer_type_low",color:_t.a[500],colorAlt:_t.a[400]},unknown:{icon:Object(x.jsx)(Bt.a,{}),tKey:"consumer_type_unknown",color:Vt.a[500],colorAlt:Vt.a[400]}},$t=function(e){return e in Xt?Xt[e]:Xt.unknown};function Zt(e,t){return new Promise((function(n,c){e.then(n).catch((function(e){var a;404===(null===(a=e.response)||void 0===a?void 0:a.status)?n(t()):c(e)}))}))}var en=Array.from(Array(24).keys()).map((function(e){return function(e){return e<10?"0"+e:""+e}(e)})),tn=new Date,nn=new Date;nn.setDate(tn.getDate()+1);var cn=nn.toISOString().slice(0,10);var an=function(e){var t=at({page:"Behavior"}).Track,n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(c.useState)(!0),h=Object(o.a)(O,2),p=h[0],v=h[1],m=Object(c.useState)(!1),g=Object(o.a)(m,2),k=g[0],y=g[1],_=ve(),w=Object(o.a)(_,2),C=w[0],S=w[1],A=ve(),T=Object(o.a)(A,2),E=T[0],W=T[1],M=Object(F.a)().t,D=Ye(),B=Object(o.a)(D,2),I=B[0],P=B[1],L=e.setAppBar,K=e.backendService,R=!p&&!i,z=Object(c.useCallback)((function(){v(!0),Promise.all([K.getConsumers(),Zt(K.getPrediction(cn),(function(){return{validated:!1,data:[]}})),K.getAvailableEnergy(cn)]).then((function(e){var t,n=Object(o.a)(e,3),c=n[0],a=n[1],r=n[2],i=c.filter((function(e){return e.active})).map((function(e){var t,n,c=$t(e.type),r=c.color,o=c.colorAlt,i=c.tKey,s=c.icon;return{header:Object(x.jsx)($e.a,{title:Object(x.jsx)(x.Fragment,{children:M(i)}),enterTouchDelay:0,children:Object(x.jsx)(st.a,{variant:"rounded",sx:{width:30,height:30,backgroundColor:r},children:s})}),consumerId:e.id,cellStates:null!==(t=null===(n=a.data.find((function(t){return t.consumerId===e.id})))||void 0===n?void 0:n.data)&&void 0!==t?t:en.map((function(){return 0})),colorSelected:r,colorBeingSelected:o}}));b(null!==(t=null===r||void 0===r?void 0:r.map(St))&&void 0!==t?t:[]),s(i),y(!1)}),S).catch(console.log).finally((function(){return v(!1)}))}),[M,K,S]);Object(c.useEffect)(z,[z]);var U=Object(c.useCallback)((function(e){s((function(t){return null===t||void 0===t?void 0:t.map((function(t,n){return Object(r.a)(Object(r.a)({},t),{},{cellStates:e[n]})}))})),y(!0)}),[]),N=Object(c.useCallback)((function(){i&&i&&K.putPrediction(cn,i.map((function(e){return{consumerId:e.consumerId,data:e.cellStates}}))).then((function(){W(M("changes_saved")),y(!1)}),S).catch(console.log)}),[i,K,S,W,M]);Object(c.useEffect)((function(){L({title:M("card_behavior_full_title",{date:nn}),children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{description:M("info"),icon:Object(x.jsx)(it.a,{}),onClick:P}),Object(x.jsx)(nt,{requiresAttention:k,description:M("save"),icon:Object(x.jsx)(Le.a,{}),onClick:N})]})}})}),[M,L,N,P,k]);var q=function(){var e=M("info_behavior",{returnObjects:!0}),t=M("consumer_help",{returnObjects:!0});return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})})),t.map((function(e){return Object(x.jsx)(he.a,{children:e})}))]})};return Object(x.jsxs)(t,{children:[p&&Object(x.jsx)(j.a,{}),R&&Object(x.jsx)(ct,{retry:z}),i&&Object(x.jsx)(ze.a,{disableGutters:!0,maxWidth:"xl",sx:{paddingTop:1,display:"grid"},children:Object(x.jsx)(lt.a,{sx:{overflow:"auto",maxHeight:{xs:"calc(100vh - 124px)",sm:"calc(100vh - 72px)"}},children:Object(x.jsxs)(ut.a,{stickyHeader:!0,size:"small",sx:{userSelect:"none",borderCollapse:"collapse"},children:[Object(x.jsxs)(jt.a,{children:[Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{variant:"head",sx:{border:0}}),en.map((function(e){return Object(x.jsxs)(bt.a,{align:"center",sx:{border:0},children:[String(e),"\u2070\u2070"]})}))]}),d&&Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{sx:{border:0}}),d.map((function(e){return Object(x.jsx)(bt.a,{sx:{border:0,backgroundColor:e,top:"37px"}})}))]})]}),Object(x.jsx)(Ot.a,{children:Object(x.jsx)(kt,{rows:i,onChange:U})})]})})}),Object(x.jsx)(oe.a,{when:k,message:M("unsaved_changes")}),Object(x.jsx)(Qe,Object(r.a)({title:M("info"),content:Object(x.jsx)(q,{})},I)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},E),{},{severity:"success"})),Object(x.jsx)(f,Object(r.a)({},C))]})},rn=n(219),on=n.n(rn),sn=n(217),ln=n.n(sn),un=n(218),jn=n.n(un),dn=n(427),bn=n(405),On=function(e,t){return hn(e.consumer,t.consumer)},hn=function(e,t){return e.type===t.type&&e.id===t.id&&e.active===t.active},xn=a.a.memo((function(e){var t=Object(F.a)().t,n=e.consumer,c=e.clickEdit,a=e.clickActive,r=e.clickDelete,o=!!c,i=n.active?t("hide_consumer"):t("show_consumer"),s=t("consumer_type_"+n.type),l=$t(n.type);return Object(x.jsxs)(E.a,{role:void 0,button:o,onClick:function(){return c&&c(n)},children:[Object(x.jsx)(dn.a,{children:Object(x.jsx)(st.a,{sx:{backgroundColor:l.color},children:l.icon})}),Object(x.jsx)(W.a,{primary:s}),Object(x.jsxs)(bn.a,{children:[a&&Object(x.jsx)($e.a,{title:i,children:Object(x.jsx)(je.a,{edge:"end","arial-label":i,onClick:function(){return a(n)},size:"large",children:n.active?Object(x.jsx)(ln.a,{}):Object(x.jsx)(jn.a,{})})}),r&&Object(x.jsx)(je.a,{edge:"end","arial-label":"delete",onClick:function(){return r(n)},size:"large",children:Object(x.jsx)(on.a,{})})]})]},n.id)}),On);var fn=function(e){var t=at({page:"Consumers"}).Track,n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=ve(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Ye(),h=Object(o.a)(O,2),p=h[0],v=h[1],m=Object(F.a)().t,g=e.backendService,k=e.setAppBar,y=Object(c.useState)(!0),_=Object(o.a)(y,2),w=_[0],C=_[1],S=!i&&!w,A=Object(c.useCallback)((function(){C(!0),g.getConsumers().then(s,b).catch(console.log).finally((function(){return C(!1)}))}),[g,b]);Object(c.useEffect)(A,[A]);var E=Object(c.useCallback)((function(e){return g.putConsumer(Object(r.a)(Object(r.a)({},e),{},{active:!e.active})).then((function(){return g.getConsumers()})).then(s,b).catch(console.log)}),[g,b]);Object(c.useEffect)((function(){return k({title:m("edit_consumers"),children:function(){return Object(x.jsx)(nt,{description:m("info"),icon:Object(x.jsx)(it.a,{}),onClick:v})}})}),[m,k,v]);var W=function(){var e=m("info_consumers",{returnObjects:!0}),t=m("consumer_help",{returnObjects:!0});return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})})),t.map((function(e){return Object(x.jsx)(he.a,{children:e})}))]})};return Object(x.jsxs)(t,{children:[w&&Object(x.jsx)(j.a,{}),S&&Object(x.jsx)(ct,{retry:A}),i&&Object(x.jsx)(ze.a,{maxWidth:"sm",sx:{paddingTop:1,paddingBottom:10},children:Object(x.jsx)(ce.a,{variant:"outlined",children:Object(x.jsx)(T.a,{children:i.map((function(e){return Object(x.jsx)(xn,{consumer:e,clickActive:E},e.id)}))})})}),Object(x.jsx)(f,Object(r.a)({},d)),Object(x.jsx)(Qe,Object(r.a)({title:m("info"),content:Object(x.jsx)(W,{})},p))]})},pn=n(363),vn=n(392),mn=n(177),gn=n(105),kn=n(362),yn=n(118),_n=function(e){return Object(c.useMemo)((function(){return Object(Ne.a)(e,"yyyy-MM-dd",new Date)}),[e])};var wn=function(e){var t,n,a=at({page:"Feedback"}).Track,i=Object(F.a)().t,s=Ye(),l=Object(o.a)(s,2),u=l[0],d=l[1],b=Object(c.useState)(!1),O=Object(o.a)(b,2),h=O[0],p=O[1],v=new URLSearchParams(Object(oe.i)().search).get("date"),m=_n(v),g=Object(gn.a)(m)&&Object(kn.a)(m),k=e.setAppBar,y=e.backendService,_=Object(c.useState)(),w=Object(o.a)(_,2),C=w[0],S=w[1],A=Object(c.useState)(!0),T=Object(o.a)(A,2),E=T[0],W=T[1],M=ve(),D=Object(o.a)(M,2),B=D[0],I=D[1],P=function(e){var t=Object(te.a)(),n=Object(F.a)().t;return Object(c.useMemo)((function(){return{labels:[n("feedback_energy_consumption")],datasets:[{label:n("feedback_my_energy_consumption"),data:[e.self],backgroundColor:wt.a[800],borderColor:t.palette.background.paper},{label:n("feedback_other_energy_consumption"),data:[e.others],backgroundColor:Ht.a[800],borderColor:t.palette.background.paper}]}}),[t,e.self,e.others,n])}(null!==(t=null===C||void 0===C?void 0:C.totalUsage)&&void 0!==t?t:{self:0,others:0}),L=function(){var e=Object(te.a)();return Object(c.useMemo)((function(){return{responsive:!0,scales:{xAxis:{display:!1},yAxis:{position:"right",grid:{drawBorder:!1,color:e.palette.divider},ticks:{callback:function(e){return e+" kWh"},padding:10,stepSize:1,color:e.palette.text.primary,font:{family:e.typography.fontFamily}}}},plugins:{legend:{position:"bottom",labels:{font:{family:e.typography.fontFamily},color:e.palette.text.primary}},tooltip:{enabled:!1},datalabels:{color:e.palette.primary.contrastText,font:{family:e.typography.fontFamily,size:20},formatter:function(e){return e.toFixed(1)+" kWh"}}}}}),[e])}(),K=function(e){var t=Object(te.a)(),n=Object(F.a)().t;return Object(c.useMemo)((function(){return{labels:[n("feedback_high_energy"),n("feedback_med_energy"),n("feedback_low_energy")],datasets:[{data:[e.high,e.med,e.low].map((function(e){return 100*e})),backgroundColor:[_t.a[800],yt.a[800],wt.a[800]],borderColor:t.palette.background.paper}]}}),[t,e.high,e.med,e.low,n])}(null!==(n=null===C||void 0===C?void 0:C.relativeUsage)&&void 0!==n?n:{high:0,med:0,low:0}),R=function(){var e=Object(te.a)();return Object(c.useMemo)((function(){return{responsive:!0,scales:{xAxis:{display:!1},yAxis:{display:!1}},plugins:{legend:{position:"bottom",labels:{font:{family:e.typography.fontFamily},color:e.palette.text.primary}},tooltip:{enabled:!1},datalabels:{color:e.palette.primary.contrastText,font:{family:e.typography.fontFamily,size:20},formatter:function(e){return e.toFixed(1)+"%"}}}}}),[e])}(),z=!E&&!C,U=Object(c.useCallback)((function(){g&&y.getFeedback(v).then(S,I).catch(console.log).finally((function(){return W(!1)}))}),[y,g,v,I]);if(Object(c.useEffect)(U,[U]),Object(c.useEffect)((function(){k({title:i("card_behavior_full_title",{date:m}),children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{icon:Object(x.jsx)(it.a,{}),onClick:d,description:i("info")}),Object(x.jsx)(nt,{description:i("card_behavior_title"),icon:Object(x.jsx)(pn.a,{}),onClick:function(){return p(!0)}})]})}})}),[m,i,k,d]),!g)return Object(x.jsx)(oe.b,{to:"/"});if(h)return Object(x.jsx)(oe.b,{to:"/pastbehavior?date="+v});var N=function(){var e=i("info_feedback",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))})};return Object(x.jsxs)(a,{children:[E&&Object(x.jsx)(j.a,{}),z&&Object(x.jsx)(ct,{retry:U}),C&&Object(x.jsx)(ze.a,{maxWidth:"lg",sx:{paddingTop:1},children:Object(x.jsxs)(vn.a,{container:!0,spacing:1,children:[Object(x.jsx)(vn.a,{item:!0,xs:12,md:6,children:Object(x.jsx)(ce.a,{variant:"outlined",sx:{p:2,height:"100%",display:"flex",alignItems:"flex-end"},children:Object(x.jsx)(yn.a,{plugins:[mn.a],data:P,options:L,height:300})})}),Object(x.jsx)(vn.a,{item:!0,xs:12,md:6,children:Object(x.jsx)(ce.a,{variant:"outlined",sx:{p:2,height:"100%",display:"flex",alignItems:"flex-end"},children:Object(x.jsx)(yn.c,{plugins:[mn.a],data:K,options:R})})})]})}),Object(x.jsx)(f,Object(r.a)({},B)),Object(x.jsx)(Qe,Object(r.a)({title:i("info"),content:Object(x.jsx)(N,{})},u))]})},Cn={upload:{title:"card_upload_title",subtitle:"card_upload_subtitle",icon:P.a,to:"/upload"},behavior:{title:"card_behavior_title",subtitle:"card_behavior_subtitle",icon:K.a,to:"/behavior"},power:{title:"card_power_title",subtitle:"card_power_subtitle",icon:J.a,to:"/power"},archive:{title:"card_archive_title",subtitle:"card_archive_subtitle",icon:z.a,to:"/archive"},wellBeing:{title:"card_well_being_title",subtitle:"card_well_being_subtitle",icon:G.a,to:"/wellBeing"}};var Sn=function(e){var t=at({page:"Home"}).Track,n=Object(F.a)().t,a=e.setAppBar,i=e.backendService,s=Object(c.useContext)(Ac),l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=ve(),h=Object(o.a)(O,2),v=h[0],m=h[1],g=Object(c.useState)(!0),k=Object(o.a)(g,2),y=k[0],_=k[1],w=!y&&!d;Object(c.useEffect)((function(){a({title:n("home_title"),children:function(){return Object(x.jsx)(x.Fragment,{})}})}),[n,a]);var C=Object(c.useCallback)((function(){_(!0),i.getTasks().then(b,m).catch(console.log).finally((function(){return _(!1)}))}),[m,i]),S=Object(c.useMemo)((function(){var e=new Array;return(null===d||void 0===d?void 0:d.todoPrediction)&&e.push(Cn.behavior),"homeowner"===(null===s||void 0===s?void 0:s.type)&&(null===d||void 0===d?void 0:d.todoUpload)&&e.push(Cn.upload),(null===d||void 0===d?void 0:d.todoVerifyPrediction)&&e.push(Cn.archive),(null===d||void 0===d?void 0:d.todoWellBeing)&&e.push(Cn.wellBeing),e}),[d,s]);return Object(c.useEffect)(C,[C]),Object(x.jsxs)(t,{children:[y&&Object(x.jsx)(j.a,{}),w&&Object(x.jsx)(ct,{retry:C}),d&&Object(x.jsxs)(ze.a,{maxWidth:"sm",sx:{paddingTop:3},children:[S.length<=0&&Object(x.jsxs)(p.a,{pt:8,children:[Object(x.jsx)(A.a,{variant:"h3",textAlign:"center",paragraph:!0,children:n("home_well_done_title")}),Object(x.jsx)(A.a,{variant:"h5",textAlign:"center",children:n("home_well_done_subtitle")})]}),S.length>0&&Object(x.jsxs)(Ue.a,{spacing:1,children:[Object(x.jsx)(A.a,{variant:"h5",children:n("home_item_todos")}),S.map((function(e,t){return Object(c.createElement)(Ve,Object(r.a)(Object(r.a)({},e),{},{title:n(e.title),subtitle:n(e.subtitle),key:t}))}))]}),d&&!d.todoVerifyPrediction&&Object(x.jsx)(p.a,{pt:10,children:Object(x.jsx)(Ve,Object(r.a)(Object(r.a)({},Cn.archive),{},{title:n(Cn.archive.title),subtitle:n(Cn.archive.subtitle),done:!0}))})]}),Object(x.jsx)(f,Object(r.a)({},v))]})},An={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"};var Tn=function(e){var t=Object(F.a)().t;return Object(x.jsx)(ze.a,{maxWidth:"xs",sx:An,children:Object(x.jsxs)(ce.a,{square:!0,variant:"outlined",sx:{width:"100%",p:2},children:[Object(x.jsx)(A.a,{variant:"h5",textAlign:"center",children:t("logging_in")}),Object(x.jsx)(p.a,{mt:5}),Object(x.jsx)(j.a,{}),Object(x.jsxs)(Ue.a,{direction:"row",sx:{justifyContent:"flex-end",pt:2},children:[Object(x.jsx)(fe.a,{component:d.b,to:"/logout",sx:{mr:2},children:t("logout")}),Object(x.jsx)(fe.a,{onClick:e.retry,children:t("retry")})]})]})})},En=n(366),Wn=n(430),Fn=n(365),Mn=n(428),Dn=n(381),Bn=n(429),In=n(432),Pn=n(364),Ln=Object(Pn.a)(vn.a)({margin:2,padding:8,display:"flex",flexDirection:"column",alignItems:"center"});function Kn(e){var t=Object(F.a)(),n=t.t,c=t.i18n,o=a.a.useCallback((function(t){return c.changeLanguage(t).catch(console.log).finally((function(){return e.onClose()}))}),[c,e]);return Object(x.jsx)(be,Object(r.a)(Object(r.a)({title:n("change_language")},e),{},{children:Object(x.jsxs)(T.a,{sx:{pt:0},children:[Object(x.jsx)(Fn.a,{onClick:function(){return o("en")},children:Object(x.jsx)(W.a,{primary:n("lang_english")})}),Object(x.jsx)(Fn.a,{onClick:function(){return o("de")},children:Object(x.jsx)(W.a,{primary:n("lang_german")})})]})}))}var Rn=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(""),l=Object(o.a)(s,2),u=l[0],j=l[1],d=ve(),b=Object(o.a)(d,2),O=b[0],h=b[1],v=Object(F.a)().t,m=Object(oe.h)(),g=e.backendService,k=Ye(),y=Object(o.a)(k,2),_=y[0],w=y[1],C=Ye(),S=Object(o.a)(C,2),T=S[0],E=S[1],W=Object(c.useState)(!1),M=Object(o.a)(W,2),D=M[0],B=M[1],I=Object(c.useCallback)((function(e){e.preventDefault(),B(!0),g.requestPin(a,u).then((function(){return m.push("/verify",{email:u})}),(function(e){h(e),B(!1)})).catch()}),[g,m,h,u,a]),P=function(){var e=v("info_personal_code",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(he.a,{children:e})}))})},L=function(){var e=v("info_login",{returnObjects:!0}),t=v("info_login_link");return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return e?Object(x.jsx)(A.a,{children:e}):Object(x.jsx)(p.a,{py:1})})),Object(x.jsx)(Mn.a,{component:"a",href:t,children:t})]})},K=function(){var e=v("info_personal_code",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(A.a,{children:e})}))})};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ze.a,{maxWidth:"lg",sx:{pt:5},children:Object(x.jsx)(p.a,{children:Object(x.jsxs)(vn.a,{container:!0,spacing:2,children:[Object(x.jsxs)(Ln,{item:!0,xs:12,md:!0,children:[Object(x.jsx)(A.a,{paragraph:!0,component:"h1",variant:"h2",children:"ANSERS"}),Object(x.jsx)(A.a,{component:"h2",variant:"h5",children:v("login_welcome")}),Object(x.jsxs)(p.a,{pt:8,children:[Object(x.jsx)(L,{}),Object(x.jsx)(p.a,{py:2}),Object(x.jsx)(A.a,{children:v("info_login2")}),Object(x.jsx)(p.a,{py:2}),Object(x.jsx)(K,{})]})]}),Object(x.jsxs)(Ln,{item:!0,xs:12,md:!0,sx:{minHeight:400},children:[Object(x.jsx)(st.a,{sx:{margin:"1px",backgroundColor:"secondary.main"}}),Object(x.jsx)(A.a,{component:"h1",variant:"h5",children:v("login_sign_in")}),Object(x.jsxs)("form",{onSubmit:I,children:[Object(x.jsx)(Dn.a,{autoFocus:!0,autoComplete:"email",disabled:D,id:"email",label:v("login_email_address"),variant:"outlined",margin:"normal",value:u,onChange:function(e){return j(e.target.value)},required:!0,fullWidth:!0}),Object(x.jsx)(Dn.a,{id:"shared_password",disabled:D,label:v("login_shared_password"),variant:"outlined",margin:"normal",value:a,onChange:function(e){return i(e.target.value)},required:!0,fullWidth:!0,InputProps:{endAdornment:Object(x.jsx)(Bn.a,{position:"end",children:Object(x.jsx)(je.a,{onClick:E,children:Object(x.jsx)(Pe.a,{color:"inherit"})})})}}),Object(x.jsx)(Wn.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{marginTop:1},loading:D,children:v("login_submit")})]})]})]})})}),Object(x.jsxs)(In.a,{variant:"extended",title:v("change_language"),color:"primary",size:"medium",onClick:w,children:[Object(x.jsx)(En.a,{sx:{mr:1}}),"ENG / DEU"]}),Object(x.jsx)(Kn,Object(r.a)({},_)),Object(x.jsx)(Qe,Object(r.a)({title:v("info"),content:Object(x.jsx)(P,{})},T)),Object(x.jsx)(f,Object(r.a)({},O))]})};var zn=function(e){var t=at({page:"Logout"}).Track,n=Object(oe.h)().push,a=e.backendService;return Object(c.useEffect)((function(){a.logout().catch(console.log).then((function(){return n("/")}))}),[a,n]),Object(x.jsx)(t,{children:Object(x.jsx)(j.a,{})})};var Un=function(e){var t=Object(F.a)().t;return Object(x.jsxs)(p.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"70vh",justifyContent:"center"},children:[Object(x.jsx)(A.a,{variant:"h1",children:"404",gutterBottom:!0}),Object(x.jsx)(A.a,{variant:"h5",paragraph:!0,children:t("page_not_found")}),Object(x.jsx)(fe.a,{color:"primary",variant:"contained",component:d.b,to:"/",children:t("go_back")})]})},Nn=n(431),qn=Array.from(Array(24).keys()).map((function(e){return function(e){return e<10?"0"+e:""+e}(e)})),Gn=function(e){var t=Object(F.a)().t,n=$t(e.type),c=n.color,a=n.icon,r=n.tKey;return Object(x.jsx)($e.a,{title:Object(x.jsx)(x.Fragment,{children:t(r)}),enterTouchDelay:0,children:Object(x.jsx)(st.a,{variant:"rounded",sx:{backgroundColor:c,width:30,height:30},children:a})})};var Hn=function(e){var t=at({page:"PastBehavior"}).Track,n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(c.useState)(!1),h=Object(o.a)(O,2),p=h[0],v=h[1],m=Object(c.useState)(!0),g=Object(o.a)(m,2),k=g[0],y=g[1],_=Object(c.useState)(!1),w=Object(o.a)(_,2),C=w[0],S=w[1],A=Object(c.useState)(),T=Object(o.a)(A,2),E=T[0],W=T[1],M=ve(),D=Object(o.a)(M,2),B=D[0],I=D[1],P=ve(),L=Object(o.a)(P,2),K=L[0],R=L[1],z=Object(F.a)().t,U=Ye(),N=Object(o.a)(U,2),q=N[0],G=N[1],H=new URLSearchParams(Object(oe.i)().search).get("date"),J=_n(H),V=Object(gn.a)(J)&&Object(kn.a)(J),Y=!k&&!i,Q=e.setAppBar,X=e.backendService,$=Object(c.useCallback)((function(){V&&(y(!0),Promise.all([X.getConsumers(),X.getPrediction(H),X.getAvailableEnergy(H)]).then((function(e){var t,n=Object(o.a)(e,3),c=n[0],a=n[1],r=n[2],i=c.filter((function(e){return e.active})).map((function(e){var t,n,c=$t(e.type);return{header:Object(x.jsx)(Gn,{type:e.type}),consumerId:e.id,cellStates:null!==(t=null===(n=a.data.find((function(t){return t.consumerId===e.id})))||void 0===n?void 0:n.data)&&void 0!==t?t:qn.map((function(){return 0})),colorSelected:c.color,colorBeingSelected:c.colorAlt}}));W(a.validated),b(null!==(t=null===r||void 0===r?void 0:r.map(St))&&void 0!==t?t:[]),s(i),v(!1)}),(function(e){I(e),s(void 0)})).catch(console.log).finally((function(){return y(!1)})))}),[V,X,I,H]);Object(c.useEffect)($,[$]);var Z=Object(c.useCallback)((function(e){s((function(t){return null===t||void 0===t?void 0:t.map((function(t,n){return Object(r.a)(Object(r.a)({},t),{},{cellStates:e[n]})}))})),v(!0)}),[]),ee=Object(c.useCallback)((function(){i&&!E&&X.putPrediction(H,i.map((function(e){return{consumerId:e.consumerId,data:e.cellStates}}))).then((function(){R(z("changes_saved")),v(!1),S(!0)}),I).catch(console.log)}),[X,H,i,I,R,z,E]);if(Object(c.useEffect)((function(){V&&Q({title:z("card_behavior_full_title",{date:J}),children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{description:z("info"),icon:Object(x.jsx)(it.a,{}),onClick:G}),void 0===E&&Object(x.jsx)(nt,{description:z("loading"),icon:Object(x.jsx)(Nn.a,{variant:"indeterminate",size:"small",color:"inherit"})}),void 0!==E&&!E&&Object(x.jsx)(nt,{requiresAttention:p,description:z("save"),icon:Object(x.jsx)(Le.a,{}),onClick:ee}),E&&Object(x.jsx)(nt,{description:z("feedback"),icon:Object(x.jsx)(Re.a,{}),onClick:function(){return S(!0)}})]})}})}),[V,J,ee,p,G,Q,z,E]),!V)return Object(x.jsx)(oe.b,{to:"/"});if(C)return Object(x.jsx)(oe.b,{to:"/feedback?date="+H});var te=function(){var e=z("info_past_behavior",{returnObjects:!0}),t=z("consumer_help",{returnObjects:!0}),n=z("consumer_help",{returnObjects:!0});return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})})),t.map((function(e){return Object(x.jsx)(he.a,{children:e})})),n.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))]})};return Object(x.jsxs)(t,{children:[k&&Object(x.jsx)(j.a,{}),Y&&Object(x.jsx)(ct,{retry:$}),i&&Object(x.jsx)(ze.a,{disableGutters:!0,maxWidth:"xl",sx:{paddingTop:1,display:"grid"},children:Object(x.jsx)(lt.a,{sx:{overflow:"auto",maxHeight:{xs:"calc(100vh - 124px)",sm:"calc(100vh - 72px)"}},children:Object(x.jsxs)(ut.a,{stickyHeader:!0,size:"small",sx:{userSelect:"none",borderCollapse:"collapse"},children:[Object(x.jsxs)(jt.a,{children:[Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{variant:"head",sx:{border:0}}),qn.map((function(e){return Object(x.jsxs)(bt.a,{align:"center",sx:{border:0},children:[String(e),"\u2070\u2070"]})}))]}),d&&Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{variant:"head",sx:{border:0}}),d.map((function(e){return Object(x.jsx)(bt.a,{sx:{border:0,backgroundColor:e,top:"37px"}})}))]})]}),Object(x.jsx)(Ot.a,{children:Object(x.jsx)(kt,{rows:i,onChange:Z,readonly:E})})]})})}),Object(x.jsx)(oe.a,{when:p,message:z("unsaved_changes")}),Object(x.jsx)(Qe,Object(r.a)({title:z("info"),content:Object(x.jsx)(te,{})},q)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},K),{},{severity:"success"})),Object(x.jsx)(f,Object(r.a)({},B))]})},Jn=n(367),Vn=n(368),Yn=n(433),Qn=Object(Pn.a)("input")({display:"none"}),Xn=[{name:"Stromnetz Graz",link:"https://webportal.stromnetz-graz.at/"}];var $n=function(e){var t=at({page:"Upload"}).Track,n=ve(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=ve(),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(F.a)().t,O=e.backendService,h=e.setAppBar,v=Ye(),m=Object(o.a)(v,2),g=m[0],k=m[1],_=Object(c.useState)(),w=Object(o.a)(_,2),C=w[0],S=w[1],E=!!C,M=Object(c.useCallback)((function(e){if(!E){var t=O.postConsumption(e),n=t.promise,c=t.cancelToken;S(c),n.then((function(){return s(b("file_upload_success"))}),d).finally((function(){return S(void 0)})).catch(console.log)}}),[E,O,s,d,b]),D=Object(c.useCallback)((function(){S((function(e){null===e||void 0===e||e.cancel()}))}),[]);Object(c.useEffect)((function(){return h({title:b("card_upload_title"),children:function(){return Object(x.jsx)(nt,{description:b("info"),icon:Object(x.jsx)(it.a,{}),onClick:k})}})}),[b,h,k]);var B=b("info_upload",{returnObjects:!0}),I=Object(x.jsx)(x.Fragment,{children:B.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))});return Object(x.jsxs)(t,{children:[Object(x.jsx)(ze.a,{maxWidth:"md",sx:{paddingTop:1},children:Object(x.jsxs)(vn.a,{container:!0,spacing:3,children:[Object(x.jsxs)(vn.a,{item:!0,xs:12,sm:6,children:[Object(x.jsx)(A.a,{variant:"h5",gutterBottom:!0,children:b("upload_title_download")}),Object(x.jsx)(A.a,{color:"text.secondary",paragraph:!0,children:b("upload_instruction_download")}),Object(x.jsx)(ce.a,{children:Object(x.jsxs)(T.a,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(A.a,{sx:{mt:.5,ml:2},color:"text.secondary",display:"block",variant:"caption",children:b("network_operators")})}),Xn.map((function(e){return Object(x.jsxs)(Fn.a,{component:"a",href:e.link,target:"_blank",children:[Object(x.jsx)(dn.a,{children:Object(x.jsx)(Jn.a,{})}),Object(x.jsx)(W.a,{primary:e.name}),Object(x.jsx)(y.a,{children:Object(x.jsx)(Vn.a,{})})]},e.name)}))]})})]}),Object(x.jsxs)(vn.a,{item:!0,xs:12,sm:6,children:[Object(x.jsx)(A.a,{variant:"h5",gutterBottom:!0,children:b("upload_title_upload")}),Object(x.jsx)(A.a,{color:"text.secondary",paragraph:!0,children:b("upload_instruction_upload")}),Object(x.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(x.jsx)(p.a,{sx:{flexGrow:1},children:Object(x.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(x.jsx)(Qn,{accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",type:"file",onChange:function(e){var t;return(null===(t=e.target)||void 0===t?void 0:t.files)&&M(e.target.files[0])}}),Object(x.jsx)(Wn.a,{loading:E,fullWidth:!0,size:"large",variant:"contained",component:"span",loadingPosition:"start",startIcon:Object(x.jsx)(P.a,{}),children:b("action_upload")})]})}),Object(x.jsx)(Yn.a,{in:E,orientation:"horizontal",children:Object(x.jsx)(fe.a,{size:"large",onClick:D,children:b("cancel")})})]})]})]})}),Object(x.jsx)(Qe,Object(r.a)({title:b("info"),content:I},g)),Object(x.jsx)(f,Object(r.a)({severity:"success"},i)),Object(x.jsx)(f,Object(r.a)({},j))]})},Zn=n(369),ec=n(370),tc=n(371),nc=n(372),cc=n(373),ac=n(374),rc=n(375),oc=n(393),ic=n(434),sc=n(107);function lc(e){var t=Object(c.useContext)(Ac),n=[{icon:Object(x.jsx)(Zn.a,{}),text:t.email},{icon:Object(x.jsx)(ec.a,{}),text:t.location}];return Object(x.jsx)(x.Fragment,{children:n.map((function(e,t){return Object(x.jsxs)(E.a,{children:[Object(x.jsx)(y.a,{children:e.icon}),Object(x.jsx)(W.a,{children:e.text})]},"element_"+t)}))})}function uc(e){var t=Object(F.a)().t;return Object(x.jsxs)(E.a,{button:!0,component:d.b,to:"/consumers",children:[Object(x.jsx)(y.a,{children:Object(x.jsx)(tc.a,{})}),Object(x.jsx)(W.a,{children:t("user_consumer")}),Object(x.jsx)(y.a,{children:Object(x.jsx)(nc.a,{})})]},"element_consumers")}function jc(e){var t=Object(F.a)().t,n=Object(c.useState)(sc.a.resolvedLanguage),r=Object(o.a)(n,2),i=r[0],s=r[1],l=e.setError,u=a.a.useCallback((function(e){return e&&sc.a.changeLanguage(e).then((function(){return s(e)}),l).catch(console.log)}),[l]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(E.a,{children:[Object(x.jsx)(y.a,{children:Object(x.jsx)(cc.a,{})}),Object(x.jsxs)(oc.a,{fullWidth:!0,color:"primary",value:i,exclusive:!0,onChange:function(e,t){return u(t)},children:[Object(x.jsx)(ic.a,{value:"en",children:t("lang_english")}),Object(x.jsx)(ic.a,{value:"de",children:t("lang_german")})]})]},"element_language2")})}function dc(e){var t,n=Object(c.useContext)(Tc),a=null!==(t=n.mode)&&void 0!==t?t:"auto",r=Object(F.a)().t;return Object(x.jsxs)(E.a,{children:[Object(x.jsx)(y.a,{children:Object(x.jsx)(ac.a,{})}),Object(x.jsxs)(oc.a,{fullWidth:!0,color:"primary",value:a,exclusive:!0,onChange:function(e,t){t&&n.toggleColorMode("auto"!==t?t:void 0)},children:[Object(x.jsx)(ic.a,{value:"auto",children:"Auto"}),Object(x.jsx)(ic.a,{value:"light",children:r("color_mode_light")}),Object(x.jsx)(ic.a,{value:"dark",children:r("color_mode_dark")})]})]},"element_color_mode")}var bc=function(e){var t=at({page:"User"}).Track,n=Ye(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=ve(),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(oe.h)(),O=Object(F.a)().t,h=e.setAppBar,p=Object(c.useContext)(Ac);return Object(c.useEffect)((function(){h({title:O("card_user_title"),children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{description:O("info"),icon:Object(x.jsx)(Pe.a,{}),onClick:s}),Object(x.jsx)(nt,{icon:Object(x.jsx)(rc.a,{}),onClick:function(){return b.push("/logout")},description:O("logout")})]})}})}),[b,s,O,h]),Object(x.jsxs)(t,{children:[Object(x.jsxs)(ze.a,{maxWidth:"sm",sx:{paddingTop:1},children:[Object(x.jsx)(ce.a,{variant:"outlined",square:!0,children:Object(x.jsxs)(T.a,{children:[Object(x.jsx)(lc,{}),Object(x.jsx)(k.a,{variant:"inset",component:"li"}),"management"!==p.type&&Object(x.jsx)(uc,{}),Object(x.jsx)(jc,{setError:d}),Object(x.jsx)(dc,{})]})}),""]}),Object(x.jsx)(Qe,Object(r.a)({title:O("info"),content:Object(x.jsx)(he.a,{children:O("info_settings")})},i)),Object(x.jsx)(f,Object(r.a)({},j))]})},Oc=Object(Pn.a)("form")({width:"100%",marginTop:1}),hc=Object(Pn.a)("div")({display:"flex",flexDirection:"column",alignItems:"center"});var xc=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],i=n[1],s=ve(),l=Object(o.a)(s,2),u=l[0],j=l[1],d=Object(F.a)().t,b=Object(oe.i)(),O=Object(oe.h)(),h=Object(c.useState)(!1),p=Object(o.a)(h,2),v=p[0],m=p[1],g=b.state.email,k=e.backendService,y=Object(c.useCallback)((function(e){e.preventDefault(),m(!0),k.login(g,a).then((function(){return O.push("/")}),(function(e){j(e),m(!1)})).catch(console.log)}),[k,g,O,a,j]),_=Object(c.useCallback)((function(e){return i(e.target.value)}),[]);return g?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(ze.a,{component:"main",maxWidth:"sm",sx:{pt:8},children:[Object(x.jsx)(A.a,{variant:"h4",paragraph:!0,children:d("verify_we_sent_a_pin",{mail:g})}),Object(x.jsx)(A.a,{variant:"h5",paragraph:!0,children:d("verify_please_check_your_email")}),Object(x.jsxs)(hc,{children:[Object(x.jsx)(st.a,{sx:{margin:"1px",backgroundColor:"secondary.main"}}),Object(x.jsx)(A.a,{paragraph:!0,component:"h1",variant:"h5",children:d("verify_title")}),Object(x.jsxs)(Oc,{onSubmit:y,children:[Object(x.jsx)(Dn.a,{disabled:v,autoFocus:!0,id:"otp",label:"Pin",variant:"outlined",margin:"normal",value:a,onChange:_,required:!0,fullWidth:!0}),Object(x.jsx)(Wn.a,{loading:v,type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{marginTop:1},children:d("verify_login")})]})]})]}),Object(x.jsx)(f,Object(r.a)({},u))]}):Object(x.jsx)(oe.b,{to:"/"})},fc=n(376),pc=n(435),vc=(n(288),(new Date).toISOString().slice(0,10));var mc=function(e){var t,n,a=at({page:"WellBeing"}).Track,i=Object(F.a)().t,s=Ye(),l=Object(o.a)(s,2),u=l[0],b=l[1],O=ve(),h=Object(o.a)(O,2),v=h[0],m=h[1],g=ve(),k=Object(o.a)(g,2),y=k[0],_=k[1],w=Object(c.useState)(),C=Object(o.a)(w,2),S=C[0],T=C[1],E=Object(c.useState)(!1),W=Object(o.a)(E,2),M=W[0],D=W[1],B=Object(c.useState)("0"),I=Object(o.a)(B,2),P=I[0],L=I[1],K=Object(c.useState)(!0),R=Object(o.a)(K,2),z=R[0],U=R[1],N=!z&&!S,q=e.backendService,G=e.setAppBar,H=Object(c.useContext)(Ac),J=Object(c.useCallback)((function(){U(!0),Zt(q.getWellBeing(vc),(function(){return{x:5,y:5}})).then(T,_).finally((function(){return U(!1)}))}),[q,_]);Object(c.useEffect)(J,[J]);var V=Object(c.useCallback)((function(){S&&q.postWellBeing(S).then((function(){return m(i("changes_saved"))}),_).then((function(){return D(!1)})).catch(console.log)}),[q,S,_,m,i]),Y=Object(c.useCallback)((function(e){T(e),D(!0)}),[]),Q=function(e,t){var n=Object(te.a)();return Object(c.useMemo)((function(){return{datasets:[{data:[{x:e,y:t,r:20}],borderWidth:1,borderColor:n.palette.divider,color:n.palette.text.primary,backgroundColor:n.palette.primary.main,pointHitRadius:25,hoverRadius:0}]}}),[n,e,t])}(null!==(t=null===S||void 0===S?void 0:S.x)&&void 0!==t?t:0,null!==(n=null===S||void 0===S?void 0:S.y)&&void 0!==n?n:0),X=function(e){var t=Object(F.a)().t;return Object(c.useMemo)((function(){return{maintainAspectRatio:!0,aspectRation:1,scales:{xScale:{alignToPixels:!0,max:10,min:0,ticks:{stepSize:1,display:!0},grid:{display:!1},title:{display:!0,text:t("mood_very_cold")+"\u2003\u27f5\u2003\u2003\u2003\u2003\u2003\u2003\u27f6\u2003"+t("mood_very_hot")}},yScale:{alignToPixels:!0,max:10,min:0,ticks:{stepSize:1,display:!0},grid:{display:!1},title:{display:!0,text:[t("mood_very_uncomfortable")+"\u2003\u27f5\u2003\u2003\u2003\u2003\u2003\u2003\u27f6\u2003"+t("mood_very_comfortable")]}}},onHover:function(e){e.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1).length?e.native.target.style.cursor="grab":e.native.target.style.cursor="default"},plugins:{dragData:{dragX:!0,showTooltip:!1,onDragStart:function(){return null},onDrag:function(){return null},onDragEnd:function(t,n,c,a){t.target.style.cursor="default",e(a)}},legend:{display:!1},tooltip:{enabled:!1}}}}),[e,t])}(Y);Object(c.useEffect)((function(){G({title:i("card_well_being_title"),children:function(){return"1"!==P?Object(x.jsx)(x.Fragment,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{icon:Object(x.jsx)(it.a,{}),onClick:b,description:i("info")}),Object(x.jsx)(nt,{requiresAttention:M,icon:Object(x.jsx)(Le.a,{}),onClick:V,description:i("save")})]})}})}),[i,G,V,b,M,P]);var $=i("info_well_being",{returnObjects:!0}),Z=Object(x.jsx)(x.Fragment,{children:$.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))}),ee="student"===H.type?"well_being_please_select_well_being_student":"well_being_please_select_well_being_homeowner";return Object(x.jsxs)(a,{children:[z&&Object(x.jsx)(j.a,{}),N&&Object(x.jsx)(ct,{retry:J}),S&&Object(x.jsx)(ze.a,{maxWidth:"sm",sx:{paddingTop:3},disableGutters:!0,children:Object(x.jsxs)(fc.a,{value:P,children:[Object(x.jsx)(pc.a,{value:"0",children:Object(x.jsxs)(ce.a,{variant:"outlined",sx:{p:2},children:[Object(x.jsx)(A.a,{variant:"h5",children:i("well_being_question_home")}),Object(x.jsx)(p.a,{mt:5}),Object(x.jsxs)(Ue.a,{direction:"row",sx:{justifyContent:"flex-end",pt:2},children:[Object(x.jsx)(fe.a,{variant:"contained",onClick:function(){return L("1")},children:i("yes")}),Object(x.jsx)(fe.a,{sx:{marginLeft:2},variant:"contained",onClick:function(){return L("2")},children:i("no")})]})]})}),Object(x.jsxs)(pc.a,{value:"1",children:[Object(x.jsx)(A.a,{variant:"h5",align:"center",paragraph:!0,children:i(ee)}),Object(x.jsx)(ce.a,{variant:"outlined",sx:{p:2},children:Object(x.jsx)(yn.b,{data:Q,options:X,height:100,width:100})})]}),Object(x.jsx)(pc.a,{value:"2",children:Object(x.jsxs)(ce.a,{square:!0,variant:"outlined",sx:{p:2},children:[Object(x.jsx)(A.a,{variant:"h5",children:i("well_being_come_back_later")}),Object(x.jsx)(p.a,{mt:5}),Object(x.jsx)(Ue.a,{direction:"row",sx:{justifyContent:"flex-end",pt:2},children:Object(x.jsx)(fe.a,{variant:"contained",component:d.b,to:"/",children:i("go_back")})})]})})]})}),Object(x.jsx)(oe.a,{when:M,message:i("unsaved_changes")}),Object(x.jsx)(Qe,Object(r.a)({title:i("info"),content:Z},u)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},v),{},{severity:"success"})),Object(x.jsx)(f,Object(r.a)({},y))]})};function gc(e){return Object(x.jsxs)(oe.e,{children:[Object(x.jsx)(oe.c,{path:"/verify",children:Object(x.jsx)(xc,Object(r.a)({},e))}),Object(x.jsx)(oe.c,{exact:!0,path:"/login",children:Object(x.jsx)(Rn,Object(r.a)({},e))}),Object(x.jsx)(oe.c,{exact:!0,path:"/",children:Object(x.jsx)(Rn,Object(r.a)({},e))}),Object(x.jsx)(oe.c,{exact:!0,path:"".concat("/GameOpSysReactApp","/"),children:Object(x.jsx)(Rn,Object(r.a)({},e))}),Object(x.jsx)(oe.c,{children:Object(x.jsx)(Un,{})})]})}function kc(e){return Object(x.jsxs)(oe.e,{children:[Object(x.jsx)(oe.c,{path:"/logout",children:Object(x.jsx)(zn,Object(r.a)({},e))}),",",Object(x.jsx)(oe.c,{children:Object(x.jsx)(Tn,Object(r.a)({},e))}),","]})}function yc(e){var t=Object(c.useContext)(Ac);if(void 0===t)return Object(x.jsx)(j.a,{});var n=function(){return Object(x.jsx)(oe.c,{path:"/upload",children:Object(x.jsx)($n,Object(r.a)({},e))})},a=function(){return Object(x.jsx)(oe.c,{path:"/user",children:Object(x.jsx)(bc,Object(r.a)({},e))})},o=function(){return Object(x.jsx)(oe.c,{path:"/archive",children:Object(x.jsx)(rt,Object(r.a)({},e))})},i=function(){return Object(x.jsx)(oe.c,{path:"/consumers",children:Object(x.jsx)(fn,Object(r.a)({},e))})},s=function(){return Object(x.jsx)(oe.c,{path:"/behavior",children:Object(x.jsx)(an,Object(r.a)({},e))})},l=function(){return Object(x.jsx)(oe.c,{path:"/pastbehavior",children:Object(x.jsx)(Hn,Object(r.a)({},e))})},u=function(){return Object(x.jsx)(oe.c,{path:"/wellBeing",children:Object(x.jsx)(mc,Object(r.a)({},e))})},d=function(){return Object(x.jsx)(oe.c,{path:"/feedback",children:Object(x.jsx)(wn,Object(r.a)({},e))})},b=function(){return Object(x.jsx)(oe.c,{exact:!0,path:"/",children:Object(x.jsx)(Sn,Object(r.a)({},e))})},O=function(){return Object(x.jsx)(oe.c,{exact:!0,path:"".concat("/GameOpSysReactApp","/"),children:Object(x.jsx)(Sn,Object(r.a)({},e))})},h=[function(){return Object(x.jsx)(oe.c,{path:"/logout",children:Object(x.jsx)(zn,Object(r.a)({},e))})}(),a(),O(),b(),o(),i(),s(),u(),l(),d()],f=[n()];return Object(x.jsxs)(oe.e,{children:["homeowner"===t.type&&f,h,Object(x.jsx)(oe.c,{children:Object(x.jsx)(Un,{})})]})}var _c=n(383),wc=n(394);function Cc(e){return e.data.data}var Sc=new(function(){function e(t){var n=this;Object(_e.a)(this,e),this.accessToken=void 0,this.isLoggedInObservable=void 0,this.backend=void 0,this.backend=t,this.accessToken=new _c.a(localStorage.getItem("token")),this.isLoggedInObservable=this.accessToken.pipe(Object(wc.a)((function(e){return null!=e&&""!==e}))),window.addEventListener("storage",(function(){var e=localStorage.getItem("token");e!==n.accessToken.value&&n.accessToken.next(e)}))}return Object(we.a)(e,[{key:"isLoggedIn",value:function(){return this.isLoggedInObservable}},{key:"requestPin",value:function(e,t){return this.backend.get("/request-pin",{params:{code:e,email:t}})}},{key:"login",value:function(e,t){var n=this;return this.backend.get("/login",{params:{email:e,otp:t}}).then(Cc).then((function(e){var t=e.token;localStorage.setItem("token",t),n.accessToken.next(t)}))}},{key:"logout",value:function(){var e=this;return this.backend.get("/logout",this.addAuth()).finally((function(){localStorage.removeItem("token"),e.accessToken.next(null)}))}},{key:"getUser",value:function(){return this.backend.get("/user",this.addAuth()).then(Cc)}},{key:"getConsumers",value:function(){return this.backend.get("/consumers",this.addAuth()).then(Cc)}},{key:"putConsumer",value:function(e){return this.backend.patch("/consumers/"+e.id,{data:{active:e.active}},this.addAuth())}},{key:"getAvailableEnergy",value:function(e){return this.backend.get("/available-energy/"+e,this.addAuth()).then(Cc)}},{key:"getTasks",value:function(){return this.backend.get("/tasks",this.addAuth()).then(Cc)}},{key:"getPredictions",value:function(){return this.backend.get("/predictions",this.addAuth()).then(Cc)}},{key:"getPrediction",value:function(e){return this.backend.get("/predictions/"+e,this.addAuth()).then(Cc)}},{key:"putPrediction",value:function(e,t){return this.backend.put("/predictions/"+e,{data:t},this.addAuth())}},{key:"getWellBeing",value:function(e){return this.backend.get("/well-being/"+e,this.addAuth()).then(Cc)}},{key:"postWellBeing",value:function(e){return this.backend.post("/well-being",{data:e},this.addAuth())}},{key:"getFeedback",value:function(e){return this.backend.get("/feedback/"+e,this.addAuth()).then(Cc)}},{key:"postConsumption",value:function(e){var t=ye.a.CancelToken.source(),n=new FormData;return n.append("upfile",e,e.name),{promise:this.backend.post("/consumptions",n,this.addAuth({cancelToken:t.token})),cancelToken:t}}},{key:"postTracking",value:function(e){return this.backend.post("/tracking",{data:e},{})}},{key:"addAuth",value:function(e){return Object(r.a)(Object(r.a)({},e),{},{headers:{Authorization:"".concat(this.accessToken.value)}})}}]),e}())(Ie.backend),Ac=a.a.createContext({id:"",email:"",type:"",location:""}),Tc=a.a.createContext({mode:void 0,toggleColorMode:function(e){}});var Ec=function(){var e=function(){var e=Object(ne.a)("(prefers-color-scheme: dark)"),t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useMemo)((function(){return{mode:a,toggleColorMode:r}}),[r,a]),s=a?"dark"===a:e;return[Object(c.useMemo)((function(){return Object(me.a)({palette:{mode:s?"dark":"light",primary:{main:ge.a[600],contrastText:"#fff"},secondary:{main:ge.a[400]}},components:{MuiAppBar:{defaultProps:{elevation:s?1:0,color:"inherit"}},MuiUseMediaQuery:{defaultProps:{noSsr:!0}},MuiGrid:{defaultProps:{spacing:1}},MuiCard:{defaultProps:{variant:"outlined",square:!0}},MuiFab:{styleOverrides:{root:{position:"fixed",bottom:"10px",right:"10px"}}},MuiSnackbar:{styleOverrides:{anchorOriginBottomCenter:{"@media (max-width:599.95px)":{bottom:"70px"}}}}}})}),[s]),i]}(),t=Object(o.a)(e,2),n=t[0],O=t[1],h=Object(c.useState)(),p=Object(o.a)(h,2),v=p[0],m=p[1],g=Object(c.useState)(),k=Object(o.a)(g,2),y=k[0],_=k[1],w=ve(),C=Object(o.a)(w,2),S=C[0],A=C[1],T=Object(c.useCallback)((function(e){return Sc.postTracking(e).catch(console.log)}),[]),E=Object(b.useTracking)({},{dispatch:T}).Track,W=function(){var e=Object(c.useState)({open:!1,message:"",callback:function(){}}),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useCallback)((function(e,t){return a({open:!0,message:e,callback:t})}),[]),s=Object(c.useCallback)((function(e){a((function(t){return t.callback(e),Object(r.a)(Object(r.a)({},t),{},{open:!1})}))}),[]);return[{open:n.open,onAccept:function(){return s(!0)},onClose:function(){return s(!1)},message:n.message},i]}(),F=Object(o.a)(W,2),M=F[0],D=F[1],B=Object(c.useState)(0),I=Object(o.a)(B,2),P=I[0],L=I[1],K=Object(c.useCallback)((function(){return L((function(e){return e+1}))}),[]),R=v;Object(c.useEffect)((function(){Sc.isLoggedIn().subscribe((function(e){return _(e)}))}),[]),Object(c.useEffect)((function(){y?Sc.getUser().then(m,A).catch(console.error):m(void 0)}),[y,A,P]);var z=Object(c.useState)({title:"",children:function(){return Object(x.jsx)(x.Fragment,{})}}),U=Object(o.a)(z,2),N=U[0],q=U[1];return Object(x.jsxs)(l.a,{theme:n,children:[Object(x.jsx)(u.a,{}),void 0!==y&&Object(x.jsx)(a.a.Suspense,{fallback:Object(x.jsx)(j.a,{}),children:Object(x.jsx)(Tc.Provider,{value:O,children:Object(x.jsxs)(d.a,{basename:"".concat("/GameOpSysReactApp","#"),getUserConfirmation:D,children:[!y&&Object(x.jsx)(gc,{backendService:Sc}),y&&R&&Object(x.jsx)(Ac.Provider,{value:v,children:Object(x.jsxs)(E,{children:[Object(x.jsxs)($,{children:[Object(x.jsx)(ee,{title:N.title,children:N.children()}),Object(x.jsx)(Q,{}),Object(x.jsx)(X,{children:Object(x.jsx)(i.a,{dateAdapter:s.a,children:Object(x.jsx)(yc,{backendService:Sc,setAppBar:q})})})]}),Object(x.jsx)(ie,{})]})}),y&&!R&&Object(x.jsx)(kc,{backendService:Sc,retry:K}),Object(x.jsx)(pe,Object(r.a)({},M)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},S),{},{severity:"error"}))]})})})]})},Wc=n(81),Fc=n.n(Wc),Mc=n(119),Dc=n(222),Bc=n.n(Dc),Ic=n(223),Pc=n(104),Lc=n(384),Kc=n(226),Rc={en:Pc.a,de:Lc.a},zc=Bc()((function(e,t,c){n(295)("./".concat(e,"/").concat(t,".json")).then((function(e){return c(null,e)})).catch((function(e){return c(e,null)}))}));sc.a.use(zc).use(Ic.a).use(Mc.e).init({fallbackLng:"en",interpolation:{escapeValue:!1,format:function(e,t,n){if(e instanceof Date)try{return Object(Kc.a)(e,t,{locale:Rc[n]})}catch(c){console.error(c)}return e}},backend:{loadPath:"".concat("/GameOpSysReactApp","/locales/{{lng}}/{{ns}}.json")}});sc.a;var Uc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Nc(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var qc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,436)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};Fc.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Ec,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/GameOpSysReactApp",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/GameOpSysReactApp","/service-worker.js");Uc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Nc(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Nc(t,e)}))}}(),qc()}},[[296,1,2]]]);
//# sourceMappingURL=main.4316d126.chunk.js.map
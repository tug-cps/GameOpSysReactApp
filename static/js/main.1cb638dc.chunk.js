(this["webpackJsonpgameopsys-react-app"]=this["webpackJsonpgameopsys-react-app"]||[]).push([[0],{294:function(e,t,n){},448:function(e,t,n){var c={"./de/translation.json":[458,4],"./en/translation.json":[459,5]};function a(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(c)},a.id=448,e.exports=a},449:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=(n(294),n(15)),o=n(8),i=n(534),s=n(536),l=n(551),u=n(533),j=n(565),d=n(31),b=n(159),O=n(541),h=n(538),x=n(0);function f(e){var t,n,c=null!==(t=e.severity)&&void 0!==t?t:"error",a=null!==(n=e.autoHideDuration)&&void 0!==n?n:3e3;return Object(x.jsx)(O.a,{anchorOrigin:{horizontal:"center",vertical:"bottom"},open:e.open,autoHideDuration:a,onClose:e.onClose,children:Object(x.jsx)(h.a,{variant:"filled",onClose:e.onClose,severity:c,children:e.message})})}var p=n(157),m=n.n(p),v=n(555),g=n(542),k=n(556),y=n(557),_=n(558),w=n(562),C=n(279),S=n(507),A=n(506),T=n(566),B=n(554),E=n(564),W=n(559),F=n(560),M=n(563),D=n(552),I=n(35),P=n(502),K=n(152),L=n.n(K),z=n(108),R=n.n(z),U=n(151),q=n.n(U),N=n(154),G=n.n(N),H=n(253),J=n.n(H),V=n(155),Y=n.n(V),Q=n(153),X=n.n(Q),$={home:{title:"home_link",subtitle:"",icon:J.a,to:"/"},upload:{title:"card_upload_title",subtitle:"card_upload_subtitle",icon:R.a,to:"/upload"},behavior:{title:"card_behavior_title",subtitle:"card_behavior_subtitle",icon:q.a,to:"/behavior"},thermostats:{title:"card_thermostats_title",subtitle:"card_thermostats_subtitle",icon:L.a,to:"/thermostats"},user:{title:"card_user_title",subtitle:"card_user_subtitle",icon:P.a,to:"/user"},power:{title:"card_power_title",subtitle:"card_power_subtitle",icon:X.a,to:"/power"},archive:{title:"card_archive_title",subtitle:"card_archive_subtitle",icon:G.a,to:"/archive"},mood:{title:"card_well_being_title",subtitle:"card_well_being_subtitle",icon:Y.a,to:"/wellBeing"}};var Z=240,ee=a.a.memo((function(){var e=Object(D.a)().t,t=function(){switch(Object(c.useContext)(Sc).type){case"student":return[$.home,$.behavior,$.user];case"homeowner":return[$.home,$.upload,$.behavior,$.user];default:return[$.home,$.user]}}();return Object(x.jsx)(v.a,{component:"nav",sx:{flexShrink:{sm:0},width:{sm:Z}},children:Object(x.jsx)(g.a,{smDown:!0,children:Object(x.jsx)(k.a,{open:!0,variant:"persistent",children:Object(x.jsxs)(v.a,{role:"presentation",sx:{width:Z},children:[Object(x.jsx)(y.a,{}),Object(x.jsx)(_.a,{}),Object(x.jsx)(W.a,{disablePadding:!0,children:t.map((function(t){return Object(x.jsxs)(F.a,{button:!0,component:d.b,to:t.to,children:[Object(x.jsx)(w.a,{children:Object(x.jsx)(C.a,{component:t.icon})}),Object(x.jsx)(M.a,{primary:e(t.title)})]},t.title)}))})]})})})})}),(function(){return!0}));function te(e){return Object(x.jsxs)(v.a,{sx:{flexGrow:1},children:[Object(x.jsx)(y.a,{}),Object(x.jsx)(a.a.Suspense,{fallback:Object(x.jsx)(j.a,{}),children:e.children})]})}function ne(e){return Object(x.jsx)(v.a,{sx:{display:"flex"},children:e.children})}var ce={ml:{sm:"".concat(Z,"px")},width:{sm:"calc(100% - ".concat(Z,"px)")}};function ae(e){var t=e.title,n=Object(S.a)(),c=Object(I.h)();return Object(x.jsx)(A.a,{appear:!1,direction:"down",in:!n,children:Object(x.jsx)(T.a,{sx:ce,children:Object(x.jsxs)(y.a,{children:[!e.hideBackButton&&Object(x.jsx)(B.a,{color:"inherit",edge:"start",sx:{marginRight:2},onClick:c.goBack,size:"large",children:Object(x.jsx)(m.a,{})}),Object(x.jsx)(E.a,{color:"inherit",variant:"h6",children:t}),Object(x.jsx)(v.a,{mx:"auto"}),e.children]})})})}var re=n(30),oe=n(503),ie=n(553),se=n(567),le=n(568);var ue=function(){var e=Object(I.h)(),t=Object(D.a)().t,n=a.a.useState(0),r=Object(o.a)(n,2),i=r[0],s=r[1],l=Object(re.a)(),u=Object(oe.a)(l.breakpoints.down("sm")),j=function(){switch(Object(c.useContext)(Sc).type){case"student":return[$.home,$.behavior,$.user];case"homeowner":return[$.home,$.upload,$.behavior,$.user];default:return[$.home,$.user]}}();return u?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v.a,{sx:{marginTop:"60px"}}),Object(x.jsx)(ie.a,{sx:{width:"100%",position:"fixed",bottom:0,overflow:"hidden",zIndex:100},elevation:5,children:Object(x.jsx)(se.a,{value:i,onChange:function(t,n){s(n);var c=j[n];null!=c&&e.push(c.to)},showLabels:!0,children:j.map((function(e){return Object(x.jsx)(le.a,{id:e.title,label:t(e.title),icon:Object(x.jsx)(C.a,{component:e.icon})})}))})})]}):null},je=n(569),de=n(570);function be(e){var t=Object(re.a)(),n=Object(oe.a)(t.breakpoints.down("sm"));return Object(x.jsxs)(je.a,{open:e.open,onClose:e.onClose,fullScreen:n,children:[n&&Object(x.jsx)(T.a,{children:Object(x.jsxs)(y.a,{children:[Object(x.jsx)(B.a,{color:"inherit",edge:"start",onClick:e.onClose,sx:{marginRight:2},size:"large",children:Object(x.jsx)(m.a,{})}),Object(x.jsx)(E.a,{variant:"h6",children:e.title})]})}),Object(x.jsx)(de.a,{children:e.title}),e.children]})}var Oe=n(571),he=n(572),xe=n(573),fe=n(574),pe=function(e){var t=Object(D.a)().t;return Object(x.jsxs)(be,{title:t("confirm_title"),open:e.open,onClose:e.onClose,children:[Object(x.jsx)(Oe.a,{children:Object(x.jsx)(he.a,{children:e.message})}),Object(x.jsxs)(xe.a,{children:[Object(x.jsx)(fe.a,{onClick:e.onClose,children:t("dialog_button_cancel")}),Object(x.jsx)(fe.a,{onClick:e.onAccept,children:t("dialog_button_ok")})]})]})};function me(){var e=Object(c.useState)({open:!1}),t=Object(o.a)(e,2),n=t[0],a=t[1];return[{open:n.open,onClose:function(){return a((function(e){return Object(r.a)(Object(r.a)({},e),{},{open:!1})}))},message:n.message},Object(c.useCallback)((function(e){var t;return a({open:!0,message:"string"===typeof e?e:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.statusText})}),[])]}var ve=n(275),ge=n(508),ke=n(122),ye=n.n(ke),_e=n(19),we=n(20),Ce=function(){function e(t,n){Object(_e.a)(this,e),this.resolve=t,this.reject=n}return Object(we.a)(e,[{key:"ok",value:function(e){console.log("FAKEBACKEND Resolving call with OK",e),this.resolve({data:e,status:200,statusText:"OK",headers:{},config:{},request:{}})}},{key:"error",value:function(e){var t,n;console.log("FAKEBACKEND Resolving call with Error"),this.reject({response:{data:{},status:null!==(t=null===e||void 0===e?void 0:e.status)&&void 0!==t?t:400,statusText:null!==(n=null===e||void 0===e?void 0:e.statusText)&&void 0!==n?n:"BAD REQUEST",headers:{},config:{},request:{}}})}}]),e}(),Se=function(){function e(t){Object(_e.a)(this,e),this.executor=t}return Object(we.a)(e,[{key:"ok",value:function(e){Math.random()>.6?this.executor.ok(e):this.executor.error()}},{key:"error",value:function(e){this.executor.error(e)}}]),e}(),Ae=n(6),Te=n(21);function Be(){var e=localStorage.getItem("fake_db");if(null==e){var t=["user@test.com","homeowner@test.com","faultyuser@test.com","faultyhomeowner@test.com"];e=JSON.stringify({location:{location_1:{name:"greenbox COOLCITY"}},user:{"user@test.com":{id:"user1",email:"user@test.com",location:"greenbox COOLCITY",type:"student"},"homeowner@test.com":{id:"user4",email:"homeowner@test.com",location:"location_1",type:"homeowner"},"faultyuser@test.com":{id:"faultyuser",email:"faultyuser@test.com",location:"greenbox COOLCITY",type:"student"},"faultyhomeowner@test.com":{id:"faultyhomeowner",email:"faultyhomeowner@test.com",location:"location_1",type:"homeowner"}},consumer:Object.assign.apply(Object,[{}].concat(Object(Te.a)(t.map((function(e){return Object(Ae.a)({},e,[{type:"laundry"},{type:"cooking"},{type:"dishes"},{type:"hygiene"},{type:"entertainment"},{type:"wellness"},{type:"homeoffice"},{type:"emobility"},{type:"temperature"},{type:"high"},{type:"med"},{type:"low"}].map((function(e,t){return{id:t.toString(),type:e.type,active:!0}})))}))))),predictions:Object.assign.apply(Object,[{}].concat(Object(Te.a)(t.map((function(e){return Object(Ae.a)({},e,{"2021-01-10":{validated:!1,data:[]},"2021-01-04":{validated:!0,data:[]},"2021-01-02":{validated:!1,data:[]},"2021-01-01":{validated:!0,data:[]}})}))))),mood:Object.assign.apply(Object,[{}].concat(Object(Te.a)(t.map((function(e){return Object(Ae.a)({},e,{})}))))),token:{"fakeToken.thistokenisfake":"user@test.com","fakeToken.thistokenisfake4":"homeowner@test.com","fakeToken.thistokenisfake5":"faultyuser@test.com","fakeToken.thistokenisfake6":"faultyhomeowner@test.com"}}),localStorage.setItem("fake_db",e)}return JSON.parse(e)}function Ee(e){localStorage.setItem("fake_db",JSON.stringify(e))}function We(e,t){for(var n in e)if(t(e[n]))return n;return null}function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.then((function(e){return new Promise((function(n){return setTimeout((function(){return n(e)}),t)}))})).catch((function(e){return new Promise((function(n,c){return setTimeout((function(){return c(e)}),t)}))}))}var Me,De=function(){function e(){Object(_e.a)(this,e)}return Object(we.a)(e,[{key:"get",value:function(e,t){return Fe(new Promise((function(n,c){var a=new Ce(n,c);if(console.log("FAKEBACKEND GET Fake backend call to ".concat(e),t),!t)return a.error();var r=Be();if(e.endsWith("/request-pin")){var o=t.params,i=o.code,s=o.email;return"test"===i&&r.user[s]?a.ok({}):a.error()}if(e.endsWith("/login")){var l=t.params,u=l.email,j=l.otp;return null!=r.user[u]&&"123456"===j?a.ok({data:{token:We(r.token,(function(e){return e===u}))}}):a.error()}if(!t.headers)return a.error();var d=t.headers.Authorization,b=r.token[d];if(null==b)return a.error();if(r.user[b].id.startsWith("faulty")&&(a=new Se(a)),e.endsWith("/logout"))localStorage.removeItem("fake_db"),a.ok({});else if(e.endsWith("/user"))a.ok({data:r.user[b]});else if(e.endsWith("/consumers"))a.ok({data:r.consumer[b]});else if(e.endsWith("/predictions"))a.ok({data:Object.keys(r.predictions[b]).map((function(e){return{validated:r.predictions[b][e].validated,date:e}}))});else if(e.includes("/predictions/")){var O=e.substring(e.lastIndexOf("/")+1),h=r.predictions[b][O];if(console.log(r.predictions[b]),!h)return a.error({status:404,statusText:"Not found"});a.ok({data:h})}else if(e.includes("/available-energy/"))a.ok({data:[0,.1,.1,.1,.1,.2,.2,.4,.5,.6,.7,.8,1,1,.8,.6,.6,.4,.3,.5,.7,.3,0,0]});else if(e.includes("/well-being/")){var x=e.substring(e.lastIndexOf("/")+1),f=r.mood[b][x];if(!f)return a.error({status:404});a.ok({data:f})}else e.endsWith("/tasks")?a.ok({data:{todoPrediction:!0,todoVerifyPrediction:!0,todoUpload:!0,todoWellBeing:!0}}):e.includes("/feedback/")?a.ok({data:{totalUsage:{self:4,others:3.6},relativeUsage:{high:.25,med:.35,low:.4}}}):a.error()})))}},{key:"post",value:function(e,t,n){var c=new Promise((function(c,a){var r=new Ce(c,a);if(console.log("FAKEBACKEND POST Fake backend call to ".concat(e),n),!n)return r.error();var o=Be();if(e.endsWith("/tracking"))return console.log("FAKEBACKEND Tracking data:",t),r.ok({});if(!n.headers)return r.error();var i=n.headers.Authorization,s=o.token[i];if(null==s)return r.error();if(o.user[s].id.startsWith("faulty")&&(r=new Se(r)),e.endsWith("/consumptions"))r.ok({});else if(e.startsWith("/well-being")){var l=(new Date).toISOString().slice(0,10);o.mood[s][l]=t.data,Ee(o),r.ok({})}r.error()}));return e.endsWith("/consumptions")?Fe(c,3e3):Fe(c)}},{key:"put",value:function(e,t,n){return Fe(new Promise((function(c,a){var r=new Ce(c,a);if(console.log("FAKEBACKEND PUT Fake backend call to ".concat(e),"config:",n,"data:",t),!(null===n||void 0===n?void 0:n.headers))return r.error();var o=Be(),i=n.headers.Authorization,s=o.token[i];if(null==s)return r.error();if(o.user[s].id.startsWith("faulty")&&(r=new Se(r)),null==e.split("/").pop())return r.error();if(e.startsWith("/predictions")){var l=e.substring(e.lastIndexOf("/")+1);o.predictions[s][l]={validated:!0,data:t.data},Ee(o),r.ok({})}else r.error()})))}},{key:"patch",value:function(e,t,n){return Fe(new Promise((function(c,a){var o=new Ce(c,a);if(console.log("FAKEBACKEND PATCH Fake backend call to ".concat(e),"config:",n,"data:",t),!(null===n||void 0===n?void 0:n.headers))return o.error();var i=Be(),s=n.headers.Authorization,l=i.token[s];if(null==l)return o.error();i.user[l].id.startsWith("faulty")&&(o=new Se(o));var u=e.split("/").pop();if(null==u)return o.error();if(e.startsWith("/consumers")){var j=t.data.active;!function(e,t,n){var c=e.findIndex(t);e[c]=Object(r.a)(Object(r.a)({},e[c]),n)}(i.consumer[l],(function(e){return e.id.toString()===u.toString()}),{active:j}),Ee(i),o.ok({})}else o.error()})))}}]),e}();ye.a.create({baseURL:"https://ansers.uni-graz.at:443/v2/"}),ye.a.create({baseURL:"https://ansers.uni-graz.at:443/v2/"});Me={backend:new De,type:"local",apiDescription:"fakeApi"};var Ie=Object(r.a)({},Me),Pe=n(509),Ke=n(511),Le=n(512),ze=n(513),Re=n(579),Ue=n(510),qe=n(276),Ne=n(575),Ge=n(576),He=n(577),Je=n(578);function Ve(e){var t,n=e.to,c=e.icon,a=e.title,r=e.subtitle,o=e.done;return Object(x.jsxs)(Ne.a,{sx:{borderColor:o?void 0:"warning.main",display:"flex",flexDirection:"row"},children:[Object(x.jsx)(Ge.a,{component:d.b,to:n,children:Object(x.jsxs)(v.a,{sx:{display:"flex",flexGrow:1},children:[Object(x.jsx)(He.a,{sx:{backgroundColor:o?"secondary.main":"warning.main",display:"flex",alignItems:"center",padding:"8px"},children:Object(x.jsx)(C.a,{component:c,sx:{color:"background.paper"}})}),Object(x.jsxs)(Je.a,{children:[Object(x.jsx)(E.a,{variant:"h6",children:a}),Object(x.jsx)(E.a,{color:"textSecondary",noWrap:!0,children:r})]})]})}),e.secondaryTo&&Object(x.jsx)(B.a,{component:d.b,to:e.secondaryTo,size:"large",sx:{alignSelf:"center",m:1},children:Object(x.jsx)(C.a,{component:null!==(t=e.secondaryIcon)&&void 0!==t?t:Pe.a})})]})}function Ye(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return[{open:n,onClose:function(){return a(!1)}},Object(c.useCallback)((function(){return a(!0)}),[])]}function Qe(e){return Object(x.jsxs)(be,{title:e.title,open:e.open,onClose:e.onClose,children:[Object(x.jsx)(Oe.a,{children:e.content}),Object(x.jsx)(xe.a,{children:Object(x.jsx)(fe.a,{onClick:e.onClose,children:"OK"})})]})}var Xe=n(546),$e=n(535);function Ze(e){return Object(x.jsx)(Xe.a,{invisible:!e.requiresAttention,variant:"dot",color:"info",children:e.icon})}function et(e){return Object(x.jsx)($e.a,{title:e.description,children:Object(x.jsx)(B.a,{color:"inherit",onClick:e.onClick,size:"large",children:Object(x.jsx)(Ze,Object(r.a)({},e))})})}function tt(e){return Object(x.jsx)(fe.a,{startIcon:Object(x.jsx)(Ze,Object(r.a)({},e)),color:"inherit",onClick:e.onClick,children:e.description})}var nt=function(e){var t=Object(re.a)();return Object(oe.a)(t.breakpoints.down("sm"))?Object(x.jsx)(et,Object(r.a)({},e)):Object(x.jsx)(tt,Object(r.a)({},e))};var ct=function(e){var t=Object(D.a)().t;return Object(x.jsx)(Re.a,{maxWidth:"sm",children:Object(x.jsxs)(ie.a,{variant:"outlined",square:!0,sx:{p:2,mt:3,display:"flex",flexDirection:"column"},children:[Object(x.jsx)(E.a,{children:t("error_please_retry")}),Object(x.jsx)(fe.a,{sx:{mt:5,alignSelf:"flex-end"},onClick:e.retry,children:t("retry")})]})})};function at(e,t){var n=Object(c.useContext)(Sc),a=function(e){var t;return Object(r.a)(Object(r.a)({},e),{},{date:new Date,user:null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"unknown"})},o=Object(b.useTracking)(a(e),function(e){return Object(r.a)(Object(r.a)({},e),{},{dispatchOnMount:!0})}(t)),i=o.Track,s=o.trackEvent;return{Track:i,trackEvent:function(e){return s(a(e))},getTrackingData:o.getTrackingData}}var rt=function(e){var t=at({page:"Archive"}).Track,n=Ye(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(c.useState)(!0),h=Object(o.a)(O,2),p=h[0],m=h[1],v=Object(D.a)().t,g=me(),k=Object(o.a)(g,2),y=k[0],_=k[1],w=e.backendService,C=e.setAppBar,S=!p&&!d,A=Object(c.useCallback)((function(){m(!0),w.getPredictions().then(b,_).catch(console.log).finally((function(){return m(!1)}))}),[w,_]);Object(c.useEffect)(A,[A]),Object(c.useEffect)((function(){C({title:v("card_archive_title"),showBackButton:!0,children:function(){return Object(x.jsx)(nt,{description:v("info"),icon:Object(x.jsx)(Pe.a,{}),onClick:s})}})}),[v,C,s]);var T=function(){var e=v("info_archive",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))})};return Object(x.jsxs)(t,{children:[p&&Object(x.jsx)(j.a,{}),S&&Object(x.jsx)(ct,{retry:A}),d&&Object(x.jsx)(Re.a,{maxWidth:"sm",sx:{pt:1},children:Object(x.jsx)(Ue.a,{spacing:1,children:d.map((function(e){var t=Object(qe.a)(e.date,"yyyy-MM-dd",new Date),n=e.validated;return Object(x.jsx)(Ve,{to:"/pastbehavior?date=".concat(e.date),icon:n?Ke.a:Le.a,title:v("archive_entry_date",{date:t}),subtitle:v(v(n?"archive_already_done":"archive_please_check")),done:n,secondaryTo:n&&"/feedback?date=".concat(e.date)||void 0,secondaryIcon:n&&ze.a||void 0})}))})}),Object(x.jsx)(Qe,Object(r.a)({title:v("info"),content:Object(x.jsx)(T,{})},i)),Object(x.jsx)(f,Object(r.a)({},y))]})},ot=n(55),it=n.n(ot),st=n(547),lt=n(582),ut=n(583),jt=n(584),dt=n(581),bt=n(580),Ot=n(585),ht=n(29),xt=n(28),ft=function(e,t){return e.selected===t.selected&&e.beingSelected===t.beingSelected},pt=a.a.memo((function(e){var t=e.beingSelected,n=e.selected,a=e.onTouchStart,r=e.onTouchMove,o=e.colorSelected,i=e.colorBeingSelected,s=Object(c.useRef)(),l=function(){var e=Object(c.useContext)(Ac),t=Object(oe.a)("(prefers-color-scheme: dark)");return e.mode?"dark"===e.mode:t}()?"grey.800":"grey.400";if(Object(c.useEffect)((function(){var e=s.current;if(e)return e.addEventListener("touchstart",a,{passive:!1}),e.addEventListener("touchmove",r,{passive:!1}),function(){e.removeEventListener("touchstart",a),e.removeEventListener("touchmove",r)}}),[r,a,s]),t)return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l,backgroundColor:null!==i&&void 0!==i?i:"primary.main"},onMouseDown:a,onMouseMove:r});if(0===n)return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l},onMouseDown:a,onMouseMove:r});if(4===n)return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l,backgroundColor:null!==o&&void 0!==o?o:"secondary.main"},onMouseDown:a,onMouseMove:r});var u=100-25*n;return Object(x.jsx)(bt.a,{ref:s,sx:{border:1,borderColor:l,backgroundImage:"linear-gradient(transparent ".concat(u,"%, ").concat(null!==o&&void 0!==o?o:"#9ccc65"," ").concat(u,"%);")},onMouseDown:a,onMouseMove:r})}),ft);function mt(e){var t,n,c,a;if(e.touches){var r=e.touches[0];a=document.elementFromPoint(r.clientX,r.clientY)}else for(a=e.target;"TD"!==a.tagName;)a=a.parentNode;return{row:(null===(t=a)||void 0===t||null===(n=t.parentNode)||void 0===n?void 0:n.rowIndex)-2,column:(null===(c=a)||void 0===c?void 0:c.cellIndex)-1}}var vt=function(e,t){return[Math.min(e,t),Math.max(e,t)]},gt=function(e){return 0===e.button||"mousedown"!==e.type},kt=function(e){Object(ht.a)(n,e);var t=Object(xt.a)(n);function n(e){var c;return Object(_e.a)(this,n),(c=t.call(this,e)).handleTouchStartCell=function(e){if(!c.state.selectionStarted&&gt(e)){e.preventDefault();var t=mt(e),n=t.row,a=t.column;void 0!==n&&void 0!==a&&c.setState({selectionStarted:!0,startRow:n,startColumn:a,endRow:n,endColumn:a,addMode:!c.props.rows[n].cellStates[a]})}},c.handleTouchMoveCell=function(e){var t=c.state,n=t.selectionStarted,a=t.endRow,r=t.endColumn;if(n){e.preventDefault();var o=mt(e),i=o.row,s=o.column;void 0!==i&&void 0!==s&&(a===i&&r===s||c.setState({endRow:i,endColumn:s}))}},c.handleTouchEndWindow=function(e){var t=c.state,n=t.selectionStarted,a=t.startRow,r=t.endRow,i=t.startColumn,s=t.endColumn,l=t.addMode;if(n&&gt(e)){var u=c.props.rows.map((function(e){return Object.assign([],e.cellStates)})),j=vt(a,r),d=Object(o.a)(j,2),b=d[0],O=d[1],h=vt(i,s),x=Object(o.a)(h,2),f=x[0],p=x[1];if(b===O&&f===p)u[b][p]=(u[b][p]+1)%5;else for(var m=b;m<=O;m++)for(var v=f;v<=p;v++)u[m][v]=l?4:0;c.setState({selectionStarted:!1}),c.props.onChange(u)}},c.isCellBeingSelected=function(e,t){var n=c.state,a=n.selectionStarted,r=n.startRow,i=n.endRow,s=n.startColumn,l=n.endColumn;if(!a)return!1;var u=vt(r,i),j=Object(o.a)(u,2),d=j[0],b=j[1],O=vt(s,l),h=Object(o.a)(O,2),x=h[0],f=h[1];return e>=d&&e<=b&&t>=x&&t<=f},c.state={selectionStarted:!1,startRow:0,startColumn:0,endRow:0,endColumn:0,addMode:!1},c}return Object(we.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleTouchEndWindow),window.addEventListener("touchend",this.handleTouchEndWindow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleTouchEndWindow),window.removeEventListener("touchend",this.handleTouchEndWindow)}},{key:"render",value:function(){var e=this,t=this.props.rows;return Object(x.jsx)(x.Fragment,{children:t.map((function(t,n){return Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{children:t.header,sx:{position:"sticky",left:0,backgroundColor:"background.paper",border:0}}),t.cellStates.map((function(c,a){return Object(x.jsx)(pt,{beingSelected:e.isCellBeingSelected(n,a),selected:c,onTouchStart:e.handleTouchStartCell,onTouchMove:e.handleTouchMoveCell,colorSelected:t.colorSelected,colorBeingSelected:t.colorBeingSelected})}))]})}))})}}]),n}(a.a.Component),yt=n(514),_t=n(101),wt=n(100),Ct=n(207);function St(e){var t=Object(Ct.decomposeColor)(e>=.5?yt.a[500]:_t.a[500]),n=Object(Ct.decomposeColor)(e>=.5?wt.a[500]:yt.a[500]);e=2*(e>=.5?e-.5:e);var c=t.values.map((function(t,c){return Math.floor(t+(n.values[c]-t)*e)})),a=Object(o.a)(c,3),r=a[0],i=a[1],s=a[2];return"rgb(".concat(r,", ").concat(i,", ").concat(s,")")}var At=n(261),Tt=n.n(At),Bt=n(264),Et=n.n(Bt),Wt=n(260),Ft=n.n(Wt),Mt=n(127),Dt=n.n(Mt),It=n(258),Pt=n.n(It),Kt=n(262),Lt=n.n(Kt),zt=n(265),Rt=n.n(zt),Ut=n(259),qt=n.n(Ut),Nt=n(263),Gt=n.n(Nt),Ht=n(98),Jt=n(515),Vt=n(99),Yt=n(516),Qt=n(517),Xt={laundry:{icon:Object(x.jsx)(Pt.a,{}),tKey:"consumer_type_laundry",color:Ht.a[500],colorAlt:Ht.a[400]},cooking:{icon:Object(x.jsx)(qt.a,{}),tKey:"consumer_type_cooking",color:Jt.a[500],colorAlt:Jt.a[400]},dishes:{icon:Object(x.jsx)(Ft.a,{}),tKey:"consumer_type_dishes",color:Vt.a[500],colorAlt:Vt.a[400]},hygiene:{icon:Object(x.jsx)(Tt.a,{}),tKey:"consumer_type_hygiene",color:Ht.a[500],colorAlt:Ht.a[400]},entertainment:{icon:Object(x.jsx)(Lt.a,{}),tKey:"consumer_type_entertainment",color:Yt.a[500],colorAlt:Yt.a[400]},wellness:{icon:Object(x.jsx)(Gt.a,{}),tKey:"consumer_type_wellness",color:_t.a[500],colorAlt:_t.a[400]},homeoffice:{icon:Object(x.jsx)(Et.a,{}),tKey:"consumer_type_homeoffice",color:wt.a[500],colorAlt:wt.a[400]},emobility:{icon:Object(x.jsx)(Rt.a,{}),tKey:"consumer_type_emobility",color:Ht.a[500],colorAlt:Ht.a[400]},temperature:{icon:Object(x.jsx)(L.a,{}),tKey:"consumer_type_temperature",color:Jt.a[500],colorAlt:Jt.a[400]},high:{icon:Object(x.jsx)(Dt.a,{}),tKey:"consumer_type_high",color:wt.a[500],colorAlt:wt.a[400]},med:{icon:Object(x.jsx)(Dt.a,{}),tKey:"consumer_type_med",color:Qt.a[500],colorAlt:Qt.a[400]},low:{icon:Object(x.jsx)(Dt.a,{}),tKey:"consumer_type_low",color:_t.a[500],colorAlt:_t.a[400]},unknown:{icon:Object(x.jsx)(Dt.a,{}),tKey:"consumer_type_unknown",color:Vt.a[500],colorAlt:Vt.a[400]}},$t=function(e){return e in Xt?Xt[e]:Xt.unknown};function Zt(e,t){return new Promise((function(n,c){e.then(n).catch((function(e){var a;404===(null===(a=e.response)||void 0===a?void 0:a.status)?n(t()):c(e)}))}))}var en=Array.from(Array(24).keys()).map((function(e){return function(e){return e<10?"0"+e:""+e}(e)})),tn=new Date,nn=new Date;nn.setDate(tn.getDate()+1);var cn=nn.toISOString().slice(0,10);var an=function(e){var t=at({page:"Behavior"}).Track,n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(c.useState)(!0),h=Object(o.a)(O,2),p=h[0],m=h[1],v=Object(c.useState)(!1),g=Object(o.a)(v,2),k=g[0],y=g[1],_=me(),w=Object(o.a)(_,2),C=w[0],S=w[1],A=me(),T=Object(o.a)(A,2),B=T[0],E=T[1],W=Object(D.a)().t,F=Ye(),M=Object(o.a)(F,2),P=M[0],K=M[1],L=e.setAppBar,z=e.backendService,R=!p&&!i,U=Object(c.useCallback)((function(){m(!0),Promise.all([z.getConsumers(),Zt(z.getPrediction(cn),(function(){return{validated:!1,data:[]}})),z.getAvailableEnergy(cn)]).then((function(e){var t,n=Object(o.a)(e,3),c=n[0],a=n[1],r=n[2],i=c.filter((function(e){return e.active})).map((function(e){var t,n,c=$t(e.type),r=c.color,o=c.colorAlt,i=c.tKey,s=c.icon;return{header:Object(x.jsx)($e.a,{title:Object(x.jsx)(x.Fragment,{children:W(i)}),enterTouchDelay:0,children:Object(x.jsx)(st.a,{variant:"rounded",sx:{width:30,height:30,backgroundColor:r},children:s})}),consumerId:e.id,cellStates:null!==(t=null===(n=a.data.find((function(t){return t.consumerId===e.id})))||void 0===n?void 0:n.data)&&void 0!==t?t:en.map((function(){return 0})),colorSelected:r,colorBeingSelected:o}}));b(null!==(t=null===r||void 0===r?void 0:r.map(St))&&void 0!==t?t:[]),s(i),y(!1)}),S).catch(console.log).finally((function(){return m(!1)}))}),[W,z,S]);Object(c.useEffect)(U,[U]);var q=Object(c.useCallback)((function(e){s((function(t){return null===t||void 0===t?void 0:t.map((function(t,n){return Object(r.a)(Object(r.a)({},t),{},{cellStates:e[n]})}))})),y(!0)}),[]),N=Object(c.useCallback)((function(){i&&i&&z.putPrediction(cn,i.map((function(e){return{consumerId:e.consumerId,data:e.cellStates}}))).then((function(){E(W("changes_saved")),y(!1)}),S).catch(console.log)}),[i,z,S,E,W]);Object(c.useEffect)((function(){L({title:W("card_behavior_full_title",{date:nn}),showBackButton:!1,children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{description:W("info"),icon:Object(x.jsx)(it.a,{}),onClick:K}),Object(x.jsx)(nt,{requiresAttention:k,description:W("save"),icon:Object(x.jsx)(Ke.a,{}),onClick:N})]})}})}),[W,L,N,K,k]);var G=function(){var e=W("info_behavior",{returnObjects:!0}),t=W("consumer_help",{returnObjects:!0});return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})})),t.map((function(e){return Object(x.jsx)(he.a,{children:e})}))]})};return Object(x.jsxs)(t,{children:[p&&Object(x.jsx)(j.a,{}),R&&Object(x.jsx)(ct,{retry:U}),i&&Object(x.jsx)(Re.a,{disableGutters:!0,maxWidth:"xl",sx:{paddingTop:1,display:"grid"},children:Object(x.jsx)(lt.a,{sx:{overflow:"auto",maxHeight:{xs:"calc(100vh - 124px)",sm:"calc(100vh - 72px)"}},children:Object(x.jsxs)(ut.a,{stickyHeader:!0,size:"small",sx:{userSelect:"none",borderCollapse:"collapse"},children:[Object(x.jsxs)(jt.a,{children:[Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{variant:"head",sx:{border:0}}),en.map((function(e){return Object(x.jsxs)(bt.a,{align:"center",children:[String(e),"\u2070\u2070"]})}))]}),d&&Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{sx:{border:0}}),d.map((function(e){return Object(x.jsx)(bt.a,{sx:{border:0,backgroundColor:e,top:"37px"}})}))]})]}),Object(x.jsx)(Ot.a,{children:Object(x.jsx)(kt,{rows:i,onChange:q})})]})})}),Object(x.jsx)(I.a,{when:k,message:W("unsaved_changes")}),Object(x.jsx)(Qe,Object(r.a)({title:W("info"),content:Object(x.jsx)(G,{})},P)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},B),{},{severity:"success"})),Object(x.jsx)(f,Object(r.a)({},C))]})},rn=n(268),on=n.n(rn),sn=n(266),ln=n.n(sn),un=n(267),jn=n.n(un),dn=n(586),bn=n(561),On=function(e,t){return hn(e.consumer,t.consumer)},hn=function(e,t){return e.type===t.type&&e.id===t.id&&e.active===t.active},xn=a.a.memo((function(e){var t=Object(D.a)().t,n=e.consumer,c=e.clickEdit,a=e.clickActive,r=e.clickDelete,o=!!c,i=n.active?t("hide_consumer"):t("show_consumer"),s=t("consumer_type_"+n.type),l=$t(n.type);return Object(x.jsxs)(F.a,{role:void 0,button:o,onClick:function(){return c&&c(n)},children:[Object(x.jsx)(dn.a,{children:Object(x.jsx)(st.a,{sx:{backgroundColor:l.color},children:l.icon})}),Object(x.jsx)(M.a,{primary:s}),Object(x.jsxs)(bn.a,{children:[a&&Object(x.jsx)($e.a,{title:i,children:Object(x.jsx)(B.a,{edge:"end","arial-label":i,onClick:function(){return a(n)},size:"large",children:n.active?Object(x.jsx)(ln.a,{}):Object(x.jsx)(jn.a,{})})}),r&&Object(x.jsx)(B.a,{edge:"end","arial-label":"delete",onClick:function(){return r(n)},size:"large",children:Object(x.jsx)(on.a,{})})]})]},n.id)}),On);var fn=function(e){var t=at({page:"Consumers"}).Track,n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=me(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Ye(),h=Object(o.a)(O,2),p=h[0],m=h[1],v=Object(D.a)().t,g=e.backendService,k=e.setAppBar,y=Object(c.useState)(!0),_=Object(o.a)(y,2),w=_[0],C=_[1],S=!i&&!w,A=Object(c.useCallback)((function(){C(!0),g.getConsumers().then(s,b).catch(console.log).finally((function(){return C(!1)}))}),[g,b]);Object(c.useEffect)(A,[A]);var T=Object(c.useCallback)((function(e){return g.putConsumer(Object(r.a)(Object(r.a)({},e),{},{active:!e.active})).then((function(){return g.getConsumers()})).then(s,b).catch(console.log)}),[g,b]);Object(c.useEffect)((function(){return k({title:v("edit_consumers"),showBackButton:!0,children:function(){return Object(x.jsx)(nt,{description:v("info"),icon:Object(x.jsx)(it.a,{}),onClick:m})}})}),[v,k,m]);var B=function(){var e=v("info_consumers",{returnObjects:!0}),t=v("consumer_help",{returnObjects:!0});return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})})),t.map((function(e){return Object(x.jsx)(he.a,{children:e})}))]})};return Object(x.jsxs)(t,{children:[w&&Object(x.jsx)(j.a,{}),S&&Object(x.jsx)(ct,{retry:A}),i&&Object(x.jsx)(Re.a,{maxWidth:"sm",sx:{paddingTop:1,paddingBottom:10},children:Object(x.jsx)(ie.a,{variant:"outlined",children:Object(x.jsx)(W.a,{children:i.map((function(e){return Object(x.jsx)(xn,{consumer:e,clickActive:T},e.id)}))})})}),Object(x.jsx)(f,Object(r.a)({},d)),Object(x.jsx)(Qe,Object(r.a)({title:v("info"),content:Object(x.jsx)(B,{})},p))]})},pn=n(519),mn=n(548),vn=n(208),gn=n(111),kn=n(518),yn=n(125),_n=function(e){return Object(c.useMemo)((function(){return Object(qe.a)(e,"yyyy-MM-dd",new Date)}),[e])};var wn=function(e){var t,n,a=at({page:"Feedback"}).Track,i=Object(D.a)().t,s=Ye(),l=Object(o.a)(s,2),u=l[0],d=l[1],b=Object(c.useState)(!1),O=Object(o.a)(b,2),h=O[0],p=O[1],m=new URLSearchParams(Object(I.i)().search).get("date"),v=_n(m),g=Object(gn.a)(v)&&Object(kn.a)(v),k=e.setAppBar,y=e.backendService,_=Object(c.useState)(),w=Object(o.a)(_,2),C=w[0],S=w[1],A=Object(c.useState)(!0),T=Object(o.a)(A,2),B=T[0],E=T[1],W=me(),F=Object(o.a)(W,2),M=F[0],P=F[1],K=function(e){var t=Object(re.a)(),n=Object(D.a)().t;return Object(c.useMemo)((function(){return{labels:[n("feedback_energy_consumption")],datasets:[{label:n("feedback_my_energy_consumption"),data:[e.self],backgroundColor:wt.a[800],borderColor:t.palette.background.paper},{label:n("feedback_other_energy_consumption"),data:[e.others],backgroundColor:Ht.a[800],borderColor:t.palette.background.paper}]}}),[t,e.self,e.others,n])}(null!==(t=null===C||void 0===C?void 0:C.totalUsage)&&void 0!==t?t:{self:0,others:0}),L=function(){var e=Object(re.a)();return Object(c.useMemo)((function(){return{responsive:!0,scales:{xAxis:{display:!1},yAxis:{position:"right",grid:{drawBorder:!1,color:e.palette.divider},ticks:{callback:function(e){return e+" kWh"},padding:10,stepSize:1,color:e.palette.text.primary,font:{family:e.typography.fontFamily}}}},plugins:{legend:{position:"bottom",labels:{font:{family:e.typography.fontFamily},color:e.palette.text.primary}},tooltip:{enabled:!1},datalabels:{color:e.palette.primary.contrastText,font:{family:e.typography.fontFamily,size:20},formatter:function(e){return e+" kWh"}}}}}),[e])}(),z=function(e){var t=Object(re.a)(),n=Object(D.a)().t;return Object(c.useMemo)((function(){return{labels:[n("feedback_high_energy"),n("feedback_med_energy"),n("feedback_low_energy")],datasets:[{data:[e.high,e.med,e.low].map((function(e){return 100*e})),backgroundColor:[_t.a[800],yt.a[800],wt.a[800]],borderColor:t.palette.background.paper}]}}),[t,e.high,e.med,e.low,n])}(null!==(n=null===C||void 0===C?void 0:C.relativeUsage)&&void 0!==n?n:{high:0,med:0,low:0}),R=function(){var e=Object(re.a)();return Object(c.useMemo)((function(){return{responsive:!0,scales:{xAxis:{display:!1},yAxis:{display:!1}},plugins:{legend:{position:"bottom",labels:{font:{family:e.typography.fontFamily},color:e.palette.text.primary}},tooltip:{enabled:!1},datalabels:{color:e.palette.primary.contrastText,font:{family:e.typography.fontFamily,size:20},formatter:function(e,t){return e+"%"}}}}}),[e])}(),U=!B&&!C,q=Object(c.useCallback)((function(){g&&y.getFeedback(m).then(S,P).catch(console.log).finally((function(){return E(!1)}))}),[y,g,m,P]);if(Object(c.useEffect)(q,[q]),Object(c.useEffect)((function(){k({title:i("card_behavior_full_title",{date:v}),showBackButton:!0,children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{icon:Object(x.jsx)(it.a,{}),onClick:d,description:i("info")}),Object(x.jsx)(nt,{description:i("card_behavior_title"),icon:Object(x.jsx)(pn.a,{}),onClick:function(){return p(!0)}})]})}})}),[v,i,k,d]),!g)return Object(x.jsx)(I.b,{to:"/"});if(h)return Object(x.jsx)(I.b,{to:"/pastbehavior?date="+m});var N=function(){var e=i("info_feedback",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))})};return Object(x.jsxs)(a,{children:[B&&Object(x.jsx)(j.a,{}),U&&Object(x.jsx)(ct,{retry:q}),C&&Object(x.jsx)(Re.a,{maxWidth:"lg",sx:{paddingTop:1},children:Object(x.jsxs)(mn.a,{container:!0,spacing:1,children:[Object(x.jsx)(mn.a,{item:!0,xs:12,md:6,children:Object(x.jsx)(ie.a,{variant:"outlined",sx:{p:2,height:"100%",display:"flex",alignItems:"flex-end"},children:Object(x.jsx)(yn.a,{plugins:[vn.a],data:K,options:L,height:300})})}),Object(x.jsx)(mn.a,{item:!0,xs:12,md:6,children:Object(x.jsx)(ie.a,{variant:"outlined",sx:{p:2,height:"100%",display:"flex",alignItems:"flex-end"},children:Object(x.jsx)(yn.c,{plugins:[vn.a],data:z,options:R})})})]})}),Object(x.jsx)(f,Object(r.a)({},M)),Object(x.jsx)(Qe,Object(r.a)({title:i("info"),content:Object(x.jsx)(N,{})},u))]})},Cn={upload:{title:"card_upload_title",subtitle:"card_upload_subtitle",icon:R.a,to:"/upload"},behavior:{title:"card_behavior_title",subtitle:"card_behavior_subtitle",icon:q.a,to:"/behavior"},power:{title:"card_power_title",subtitle:"card_power_subtitle",icon:X.a,to:"/power"},archive:{title:"card_archive_title",subtitle:"card_archive_subtitle",icon:G.a,to:"/archive"},wellBeing:{title:"card_well_being_title",subtitle:"card_well_being_subtitle",icon:Y.a,to:"/wellBeing"}};var Sn=function(e){var t=at({page:"Home"}).Track,n=Object(D.a)().t,a=e.setAppBar,i=e.backendService,s=Object(c.useContext)(Sc),l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=me(),h=Object(o.a)(O,2),p=h[0],m=h[1],g=Object(c.useState)(!0),k=Object(o.a)(g,2),y=k[0],_=k[1],w=!y&&!d;Object(c.useEffect)((function(){a({title:n("home_title"),showBackButton:!1,children:function(){return Object(x.jsx)(x.Fragment,{})}})}),[n,a]);var C=Object(c.useCallback)((function(){_(!0),i.getTasks().then(b,m).catch(console.log).finally((function(){return _(!1)}))}),[m,i]),S=Object(c.useMemo)((function(){var e=new Array;return(null===d||void 0===d?void 0:d.todoPrediction)&&e.push(Cn.behavior),"homeowner"===(null===s||void 0===s?void 0:s.type)&&(null===d||void 0===d?void 0:d.todoUpload)&&e.push(Cn.upload),(null===d||void 0===d?void 0:d.todoVerifyPrediction)&&e.push(Cn.archive),(null===d||void 0===d?void 0:d.todoWellBeing)&&e.push(Cn.wellBeing),e}),[d,s]);return Object(c.useEffect)(C,[C]),console.log(d),Object(x.jsxs)(t,{children:[y&&Object(x.jsx)(j.a,{}),w&&Object(x.jsx)(ct,{retry:C}),d&&Object(x.jsxs)(Re.a,{maxWidth:"sm",sx:{paddingTop:3},children:[S.length<=0&&Object(x.jsxs)(v.a,{pt:8,children:[Object(x.jsx)(E.a,{variant:"h3",textAlign:"center",paragraph:!0,children:n("home_well_done_title")}),Object(x.jsx)(E.a,{variant:"h5",textAlign:"center",children:n("home_well_done_subtitle")})]}),S.length>0&&Object(x.jsxs)(Ue.a,{spacing:1,children:[Object(x.jsx)(E.a,{variant:"h5",children:n("home_item_todos")}),S.map((function(e,t){return Object(c.createElement)(Ve,Object(r.a)(Object(r.a)({},e),{},{title:n(e.title),subtitle:n(e.subtitle),key:t}))}))]}),d&&!d.todoVerifyPrediction&&Object(x.jsx)(v.a,{pt:10,children:Object(x.jsx)(Ve,Object(r.a)(Object(r.a)({},Cn.archive),{},{title:n(Cn.archive.title),subtitle:n(Cn.archive.subtitle),done:!0}))})]}),Object(x.jsx)(f,Object(r.a)({},p))]})},An={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"};var Tn=function(e){var t=Object(D.a)().t;return Object(x.jsx)(Re.a,{maxWidth:"xs",sx:An,children:Object(x.jsxs)(ie.a,{square:!0,variant:"outlined",sx:{width:"100%",p:2},children:[Object(x.jsx)(E.a,{variant:"h5",textAlign:"center",children:t("logging_in")}),Object(x.jsx)(v.a,{mt:5}),Object(x.jsx)(j.a,{}),Object(x.jsxs)(Ue.a,{direction:"row",sx:{justifyContent:"flex-end",pt:2},children:[Object(x.jsx)(fe.a,{component:d.b,to:"/logout",sx:{mr:2},children:t("logout")}),Object(x.jsx)(fe.a,{onClick:e.retry,children:t("retry")})]})]})})},Bn=n(522),En=n(544),Wn=n(521),Fn=n(587),Mn=n(537),Dn=n(588),In=n(589),Pn=n(520),Kn=Object(Pn.a)(mn.a)({margin:2,padding:8,display:"flex",flexDirection:"column",alignItems:"center"});function Ln(e){var t=Object(D.a)(),n=t.t,c=t.i18n,o=a.a.useCallback((function(t){return c.changeLanguage(t).catch(console.log).finally((function(){return e.onClose()}))}),[c,e]);return Object(x.jsx)(be,Object(r.a)(Object(r.a)({title:n("change_language")},e),{},{children:Object(x.jsxs)(W.a,{sx:{pt:0},children:[Object(x.jsx)(Wn.a,{onClick:function(){return o("en")},children:Object(x.jsx)(M.a,{primary:n("lang_english")})}),Object(x.jsx)(Wn.a,{onClick:function(){return o("de")},children:Object(x.jsx)(M.a,{primary:n("lang_german")})})]})}))}var zn=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(""),l=Object(o.a)(s,2),u=l[0],j=l[1],d=me(),b=Object(o.a)(d,2),O=b[0],h=b[1],p=Object(D.a)().t,m=Object(I.h)(),g=e.backendService,k=Ye(),y=Object(o.a)(k,2),_=y[0],w=y[1],C=Ye(),S=Object(o.a)(C,2),A=S[0],T=S[1],W=Object(c.useState)(!1),F=Object(o.a)(W,2),M=F[0],P=F[1],K=Object(c.useCallback)((function(e){e.preventDefault(),P(!0),g.requestPin(a,u).then((function(){return m.push("/verify",{email:u})}),(function(){return P(!1)})).catch(h)}),[g,m,h,u,a]),L=function(){var e=p("info_personal_code",{returnObjects:!0});return Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsx)(he.a,{children:e})}))})},z=function(){var e=p("info_login",{returnObjects:!0}),t=p("info_login_link");return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return e?Object(x.jsx)(E.a,{children:e}):Object(x.jsx)(v.a,{py:1})})),Object(x.jsx)(Fn.a,{component:"a",href:t,children:t})]})};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Re.a,{maxWidth:"lg",sx:{pt:5},children:Object(x.jsx)(v.a,{children:Object(x.jsxs)(mn.a,{container:!0,spacing:2,children:[Object(x.jsxs)(Kn,{item:!0,xs:12,md:!0,children:[Object(x.jsx)(E.a,{paragraph:!0,component:"h1",variant:"h2",children:"ANSERS"}),Object(x.jsx)(E.a,{component:"h2",variant:"h5",children:p("login_welcome")}),Object(x.jsx)(v.a,{pt:8,children:Object(x.jsx)(z,{})})]}),Object(x.jsxs)(Kn,{item:!0,xs:12,md:!0,sx:{minHeight:400},children:[Object(x.jsx)(st.a,{sx:{margin:"1px",backgroundColor:"secondary.main"}}),Object(x.jsx)(E.a,{component:"h1",variant:"h5",children:p("login_sign_in")}),Object(x.jsxs)("form",{onSubmit:K,children:[Object(x.jsx)(Mn.a,{autoFocus:!0,autoComplete:"email",disabled:M,id:"email",label:p("login_email_address"),variant:"outlined",margin:"normal",value:u,onChange:function(e){return j(e.target.value)},required:!0,fullWidth:!0}),Object(x.jsx)(Mn.a,{id:"shared_password",disabled:M,label:p("login_shared_password"),variant:"outlined",margin:"normal",value:a,onChange:function(e){return i(e.target.value)},required:!0,fullWidth:!0,InputProps:{endAdornment:Object(x.jsx)(Dn.a,{position:"end",children:Object(x.jsx)(B.a,{onClick:T,children:Object(x.jsx)(Pe.a,{color:"inherit"})})})}}),Object(x.jsx)(En.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{marginTop:1},loading:M,children:p("login_submit")})]})]})]})})}),Object(x.jsx)(In.a,{title:p("change_language"),color:"primary",size:"medium",onClick:w,children:Object(x.jsx)(Bn.a,{})}),Object(x.jsx)(Ln,Object(r.a)({},_)),Object(x.jsx)(Qe,Object(r.a)({title:p("info"),content:Object(x.jsx)(L,{})},A)),Object(x.jsx)(f,Object(r.a)({},O))]})};var Rn=function(e){var t=at({page:"Logout"}).Track,n=Object(I.h)().push,a=e.backendService;return Object(c.useEffect)((function(){a.logout().catch(console.log).then((function(){return n("/")}))}),[a,n]),Object(x.jsx)(t,{children:Object(x.jsx)(j.a,{})})};var Un=function(e){var t=Object(D.a)().t;return Object(x.jsxs)(v.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"70vh",justifyContent:"center"},children:[Object(x.jsx)(E.a,{variant:"h1",children:"404",gutterBottom:!0}),Object(x.jsx)(E.a,{variant:"h5",paragraph:!0,children:t("page_not_found")}),Object(x.jsx)(fe.a,{color:"primary",variant:"contained",component:d.b,to:"/",children:t("go_back")})]})},qn=Array.from(Array(24).keys()).map((function(e){return function(e){return e<10?"0"+e:""+e}(e)})),Nn=function(e){var t=Object(D.a)().t,n=$t(e.type),c=n.color,a=n.icon,r=n.tKey;return Object(x.jsx)($e.a,{title:Object(x.jsx)(x.Fragment,{children:t(r)}),enterTouchDelay:0,children:Object(x.jsx)(st.a,{variant:"rounded",sx:{backgroundColor:c,width:30,height:30},children:a})})};var Gn=function(e){var t=at({page:"PastBehavior"}).Track,n=Object(c.useState)(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],b=u[1],O=Object(c.useState)(!1),h=Object(o.a)(O,2),p=h[0],m=h[1],v=Object(c.useState)(!0),g=Object(o.a)(v,2),k=g[0],y=g[1],_=Object(c.useState)(!1),w=Object(o.a)(_,2),C=w[0],S=w[1],A=Object(c.useState)(),T=Object(o.a)(A,2),B=T[0],E=T[1],W=me(),F=Object(o.a)(W,2),M=F[0],P=F[1],K=me(),L=Object(o.a)(K,2),z=L[0],R=L[1],U=Object(D.a)().t,q=Ye(),N=Object(o.a)(q,2),G=N[0],H=N[1],J=new URLSearchParams(Object(I.i)().search).get("date"),V=_n(J),Y=Object(gn.a)(V)&&Object(kn.a)(V),Q=!k&&!i,X=e.setAppBar,$=e.backendService,Z=Object(c.useCallback)((function(){Y&&(y(!0),Promise.all([$.getConsumers(),$.getPrediction(J),$.getAvailableEnergy(J)]).then((function(e){var t,n=Object(o.a)(e,3),c=n[0],a=n[1],r=n[2],i=c.filter((function(e){return e.active})).map((function(e){var t,n,c=$t(e.type);return{header:Object(x.jsx)(Nn,{type:e.type}),consumerId:e.id,cellStates:null!==(t=null===(n=a.data.find((function(t){return t.consumerId===e.id})))||void 0===n?void 0:n.data)&&void 0!==t?t:qn.map((function(){return 0})),colorSelected:c.color,colorBeingSelected:c.colorAlt}}));E(a.validated),b(null!==(t=null===r||void 0===r?void 0:r.map(St))&&void 0!==t?t:[]),s(i),m(!1)}),(function(e){P(e),s(void 0)})).catch(console.log).finally((function(){return y(!1)})))}),[Y,$,P,J]);Object(c.useEffect)(Z,[Z]);var ee=Object(c.useCallback)((function(e){s((function(t){return null===t||void 0===t?void 0:t.map((function(t,n){return Object(r.a)(Object(r.a)({},t),{},{cellStates:e[n]})}))})),m(!0)}),[]),te=Object(c.useCallback)((function(){i&&!B&&$.putPrediction(J,i.map((function(e){return{consumerId:e.consumerId,data:e.cellStates}}))).then((function(){R(U("changes_saved")),m(!1),S(!0)}),P).catch(console.log)}),[$,J,i,P,R,U,B]);if(Object(c.useEffect)((function(){Y&&X({title:U("card_behavior_full_title",{date:V}),showBackButton:!0,children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{description:U("info"),icon:Object(x.jsx)(it.a,{}),onClick:H}),void 0!==B&&!B&&Object(x.jsx)(nt,{requiresAttention:p,description:U("save"),icon:Object(x.jsx)(Ke.a,{}),onClick:te}),B&&Object(x.jsx)(nt,{description:U("feedback"),icon:Object(x.jsx)(ze.a,{}),onClick:function(){return S(!0)}})]})}})}),[Y,V,te,p,H,X,U,B]),!Y)return Object(x.jsx)(I.b,{to:"/"});if(C)return Object(x.jsx)(I.b,{to:"/feedback?date="+J});var ne=function(){var e=U("info_past_behavior",{returnObjects:!0}),t=U("consumer_help",{returnObjects:!0}),n=U("consumer_help",{returnObjects:!0});return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})})),t.map((function(e){return Object(x.jsx)(he.a,{children:e})})),n.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))]})};return Object(x.jsxs)(t,{children:[k&&Object(x.jsx)(j.a,{}),Q&&Object(x.jsx)(ct,{retry:Z}),i&&Object(x.jsx)(Re.a,{disableGutters:!0,maxWidth:"xl",sx:{paddingTop:1,display:"grid"},children:Object(x.jsx)(lt.a,{sx:{overflow:"auto",maxHeight:{xs:"calc(100vh - 124px)",sm:"calc(100vh - 72px)"}},children:Object(x.jsxs)(ut.a,{stickyHeader:!0,size:"small",sx:{userSelect:"none",borderCollapse:"collapse"},children:[Object(x.jsxs)(jt.a,{children:[Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{variant:"head"}),qn.map((function(e){return Object(x.jsxs)(bt.a,{align:"center",children:[String(e),"\u2070\u2070"]})}))]}),d&&Object(x.jsxs)(dt.a,{children:[Object(x.jsx)(bt.a,{}),d.map((function(e){return Object(x.jsx)(bt.a,{sx:{backgroundColor:e,top:"37px"}})}))]})]}),Object(x.jsx)(Ot.a,{children:Object(x.jsx)(kt,{rows:i,onChange:ee})})]})})}),Object(x.jsx)(I.a,{when:p,message:U("unsaved_changes")}),Object(x.jsx)(Qe,Object(r.a)({title:U("info"),content:Object(x.jsx)(ne,{})},G)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},z),{},{severity:"success"})),Object(x.jsx)(f,Object(r.a)({},M))]})},Hn=n(523),Jn=n(524),Vn=n(590),Yn=Object(Pn.a)("input")({display:"none"}),Qn=[{name:"Energienetze Steiermark",link:"https://portal.e-netze.at/"},{name:"Kelag",link:"https://services.kelag.at/ISS/Services.aspx"},{name:"Stromnetz Graz",link:"https://webportal.stromnetz-graz.at/"}];var Xn=function(e){var t=at({page:"Upload"}).Track,n=me(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=me(),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(D.a)().t,O=e.backendService,h=e.setAppBar,p=Ye(),m=Object(o.a)(p,2),g=m[0],k=m[1],y=Object(c.useState)(),_=Object(o.a)(y,2),C=_[0],S=_[1],A=!!C,T=Object(c.useCallback)((function(e){if(!A){var t=O.postConsumption(e),n=t.promise,c=t.cancelToken;S(c),n.then((function(){return s(b("file_upload_success"))}),d).finally((function(){return S(void 0)})).catch(console.log)}}),[A,O,s,d,b]),B=Object(c.useCallback)((function(){S((function(e){null===e||void 0===e||e.cancel()}))}),[]);Object(c.useEffect)((function(){return h({title:b("card_upload_title"),showBackButton:!1,children:function(){return Object(x.jsx)(nt,{description:b("info"),icon:Object(x.jsx)(it.a,{}),onClick:k})}})}),[b,h,k]);var F=b("info_upload",{returnObjects:!0}),I=Object(x.jsx)(x.Fragment,{children:F.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))});return Object(x.jsxs)(t,{children:[Object(x.jsx)(Re.a,{maxWidth:"md",sx:{paddingTop:1},children:Object(x.jsxs)(mn.a,{container:!0,spacing:3,children:[Object(x.jsxs)(mn.a,{item:!0,xs:12,sm:6,children:[Object(x.jsx)(E.a,{variant:"h5",gutterBottom:!0,children:b("upload_title_download")}),Object(x.jsx)(E.a,{color:"text.secondary",paragraph:!0,children:b("upload_instruction_download")}),Object(x.jsx)(ie.a,{children:Object(x.jsxs)(W.a,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(E.a,{sx:{mt:.5,ml:2},color:"text.secondary",display:"block",variant:"caption",children:b("network_operators")})}),Qn.map((function(e){return Object(x.jsxs)(Wn.a,{component:"a",href:e.link,target:"_blank",children:[Object(x.jsx)(dn.a,{children:Object(x.jsx)(Hn.a,{})}),Object(x.jsx)(M.a,{primary:e.name}),Object(x.jsx)(w.a,{children:Object(x.jsx)(Jn.a,{})})]},e.name)}))]})})]}),Object(x.jsxs)(mn.a,{item:!0,xs:12,sm:6,children:[Object(x.jsx)(E.a,{variant:"h5",gutterBottom:!0,children:b("upload_title_upload")}),Object(x.jsx)(E.a,{color:"text.secondary",paragraph:!0,children:b("upload_instruction_upload")}),Object(x.jsxs)(Ue.a,{direction:"row",spacing:1,children:[Object(x.jsx)(v.a,{sx:{flexGrow:1},children:Object(x.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(x.jsx)(Yn,{accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",type:"file",onChange:function(e){var t;return(null===(t=e.target)||void 0===t?void 0:t.files)&&T(e.target.files[0])}}),Object(x.jsx)(En.a,{loading:A,fullWidth:!0,size:"large",variant:"contained",component:"span",loadingPosition:"start",startIcon:Object(x.jsx)(R.a,{}),children:b("action_upload")})]})}),Object(x.jsx)(Vn.a,{in:A,orientation:"horizontal",children:Object(x.jsx)(fe.a,{size:"large",onClick:B,children:b("cancel")})})]})]})]})}),Object(x.jsx)(Qe,Object(r.a)({title:b("info"),content:I},g)),Object(x.jsx)(f,Object(r.a)({severity:"success"},i)),Object(x.jsx)(f,Object(r.a)({},j))]})},$n=n(525),Zn=n(526),ec=n(527),tc=n(528),nc=n(529),cc=n(530),ac=n(531),rc=n(549),oc=n(591),ic=n(114);function sc(e){var t=Object(c.useContext)(Sc),n=[{icon:Object(x.jsx)($n.a,{}),text:t.email},{icon:Object(x.jsx)(Zn.a,{}),text:t.location}];return Object(x.jsx)(x.Fragment,{children:n.map((function(e,t){return Object(x.jsxs)(F.a,{children:[Object(x.jsx)(w.a,{children:e.icon}),Object(x.jsx)(M.a,{children:e.text})]},"element_"+t)}))})}function lc(e){var t=Object(D.a)().t;return Object(x.jsxs)(F.a,{button:!0,component:d.b,to:"/consumers",children:[Object(x.jsx)(w.a,{children:Object(x.jsx)(ec.a,{})}),Object(x.jsx)(M.a,{children:t("user_consumer")}),Object(x.jsx)(w.a,{children:Object(x.jsx)(tc.a,{})})]},"element_consumers")}function uc(e){var t=Object(D.a)().t,n=Object(c.useState)(ic.a.resolvedLanguage),r=Object(o.a)(n,2),i=r[0],s=r[1],l=e.setError,u=a.a.useCallback((function(e){return e&&ic.a.changeLanguage(e).then((function(){return s(e)}),l).catch(console.log)}),[l]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(F.a,{children:[Object(x.jsx)(w.a,{children:Object(x.jsx)(nc.a,{})}),Object(x.jsxs)(rc.a,{fullWidth:!0,color:"primary",value:i,exclusive:!0,onChange:function(e,t){return u(t)},children:[Object(x.jsx)(oc.a,{value:"en",children:t("lang_english")}),Object(x.jsx)(oc.a,{value:"de",children:t("lang_german")})]})]},"element_language2")})}function jc(e){var t,n=Object(c.useContext)(Ac),a=null!==(t=n.mode)&&void 0!==t?t:"auto",r=Object(D.a)().t;return Object(x.jsxs)(F.a,{children:[Object(x.jsx)(w.a,{children:Object(x.jsx)(cc.a,{})}),Object(x.jsxs)(rc.a,{fullWidth:!0,color:"primary",value:a,exclusive:!0,onChange:function(e,t){t&&n.toggleColorMode("auto"!==t?t:void 0)},children:[Object(x.jsx)(oc.a,{value:"auto",children:"Auto"}),Object(x.jsx)(oc.a,{value:"light",children:r("color_mode_light")}),Object(x.jsx)(oc.a,{value:"dark",children:r("color_mode_dark")})]})]},"element_color_mode")}var dc=function(e){var t=at({page:"User"}).Track,n=Ye(),a=Object(o.a)(n,2),i=a[0],s=a[1],l=me(),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(I.h)(),O=Object(D.a)().t,h=e.setAppBar,p=Object(c.useContext)(Sc);return Object(c.useEffect)((function(){h({title:O("card_user_title"),showBackButton:!1,children:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{description:O("info"),icon:Object(x.jsx)(Pe.a,{}),onClick:s}),Object(x.jsx)(nt,{icon:Object(x.jsx)(ac.a,{}),onClick:function(){return b.push("/logout")},description:O("logout")})]})}})}),[b,s,O,h]),Object(x.jsxs)(t,{children:[Object(x.jsxs)(Re.a,{maxWidth:"sm",sx:{paddingTop:1},children:[Object(x.jsx)(ie.a,{variant:"outlined",square:!0,children:Object(x.jsxs)(W.a,{children:[Object(x.jsx)(sc,{}),Object(x.jsx)(_.a,{variant:"inset",component:"li"}),"management"!==p.type&&Object(x.jsx)(lc,{}),Object(x.jsx)(uc,{setError:d}),Object(x.jsx)(jc,{})]})}),""]}),Object(x.jsx)(Qe,Object(r.a)({title:O("info"),content:Object(x.jsx)(he.a,{children:O("info_settings")})},i)),Object(x.jsx)(f,Object(r.a)({},j))]})},bc=Object(Pn.a)("form")({width:"100%",marginTop:1}),Oc=Object(Pn.a)("div")({display:"flex",flexDirection:"column",alignItems:"center"});var hc=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],i=n[1],s=me(),l=Object(o.a)(s,2),u=l[0],j=l[1],d=Object(D.a)().t,b=Object(I.i)(),O=Object(I.h)(),h=Object(c.useState)(!1),p=Object(o.a)(h,2),m=p[0],v=p[1],g=b.state.email,k=e.backendService,y=Object(c.useCallback)((function(e){e.preventDefault(),v(!0),k.login(g,a).then((function(){return O.push("/")}),(function(e){j(e),v(!1)})).catch(console.log)}),[k,g,O,a,j]),_=Object(c.useCallback)((function(e){return i(e.target.value)}),[]);return g?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Re.a,{component:"main",maxWidth:"sm",sx:{pt:5},children:Object(x.jsxs)(Oc,{children:[Object(x.jsx)(st.a,{sx:{margin:"1px",backgroundColor:"secondary.main"}}),Object(x.jsx)(E.a,{component:"h1",variant:"h5",children:d("verify_title")}),Object(x.jsxs)(bc,{onSubmit:y,children:[Object(x.jsx)(Mn.a,{disabled:m,autoFocus:!0,id:"otp",label:"Pin",variant:"outlined",margin:"normal",value:a,onChange:_,required:!0,fullWidth:!0}),Object(x.jsx)(En.a,{loading:m,type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{marginTop:1},children:d("verify_login")})]})]})}),Object(x.jsx)(f,Object(r.a)({},u))]}):Object(x.jsx)(I.b,{to:"/"})},xc=n(532),fc=n(592),pc=(n(441),(new Date).toISOString().slice(0,10));var mc=function(e){var t,n,a=at({page:"WellBeing"}).Track,i=Object(D.a)().t,s=Ye(),l=Object(o.a)(s,2),u=l[0],b=l[1],O=me(),h=Object(o.a)(O,2),p=h[0],m=h[1],g=me(),k=Object(o.a)(g,2),y=k[0],_=k[1],w=Object(c.useState)(),C=Object(o.a)(w,2),S=C[0],A=C[1],T=Object(c.useState)(!1),B=Object(o.a)(T,2),W=B[0],F=B[1],M=Object(c.useState)("0"),P=Object(o.a)(M,2),K=P[0],L=P[1],z=Object(c.useState)(!0),R=Object(o.a)(z,2),U=R[0],q=R[1],N=!U&&!S,G=e.backendService,H=e.setAppBar,J=Object(c.useContext)(Sc),V=Object(c.useCallback)((function(){q(!0),Zt(G.getWellBeing(pc),(function(){return{x:5,y:5}})).then(A,_).finally((function(){return q(!1)}))}),[G,_]);Object(c.useEffect)(V,[V]);var Y=Object(c.useCallback)((function(){S&&G.postWellBeing(S).then((function(){return m(i("changes_saved"))}),_).then((function(){return F(!1)})).catch(console.log)}),[G,S,_,m,i]),Q=Object(c.useCallback)((function(e){A(e),F(!0)}),[]),X=function(e,t){var n=Object(re.a)();return Object(c.useMemo)((function(){return{datasets:[{data:[{x:e,y:t,r:20}],borderWidth:1,borderColor:n.palette.divider,color:n.palette.text.primary,backgroundColor:n.palette.primary.main,pointHitRadius:25,hoverRadius:0}]}}),[n,e,t])}(null!==(t=null===S||void 0===S?void 0:S.x)&&void 0!==t?t:0,null!==(n=null===S||void 0===S?void 0:S.y)&&void 0!==n?n:0),$=function(e){var t=Object(D.a)().t;return Object(c.useMemo)((function(){return{maintainAspectRatio:!0,aspectRation:1,scales:{xScale:{alignToPixels:!0,max:10,min:0,ticks:{display:!1},grid:{display:!1},title:{display:!0,text:t("mood_very_cold")+"\u2003\u27f5\u2003\u2003\u2003\u2003\u2003\u2003\u27f6\u2003"+t("mood_very_hot")}},yScale:{alignToPixels:!0,max:10,min:0,ticks:{display:!1},grid:{display:!1},title:{display:!0,text:[t("mood_very_uncomfortable")+"\u2003\u27f5\u2003\u2003\u2003\u2003\u2003\u2003\u27f6\u2003"+t("mood_very_comfortable")]}}},onHover:function(e){e.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1).length?e.native.target.style.cursor="grab":e.native.target.style.cursor="default"},plugins:{dragData:{dragX:!0,showTooltip:!1,onDragStart:function(){return null},onDrag:function(){return null},onDragEnd:function(t,n,c,a){t.target.style.cursor="default",e(a)}},legend:{display:!1},tooltip:{enabled:!1}}}}),[e,t])}(Q);Object(c.useEffect)((function(){H({title:i("card_well_being_title"),showBackButton:!0,children:function(){return"1"!==K?Object(x.jsx)(x.Fragment,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(nt,{icon:Object(x.jsx)(it.a,{}),onClick:b,description:i("info")}),Object(x.jsx)(nt,{requiresAttention:W,icon:Object(x.jsx)(Ke.a,{}),onClick:Y,description:i("save")})]})}})}),[i,H,Y,b,W,K]);var Z=i("info_well_being",{returnObjects:!0}),ee=Object(x.jsx)(x.Fragment,{children:Z.map((function(e){return Object(x.jsx)(he.a,{paragraph:!0,children:e})}))}),te="student"===J.type?"well_being_please_select_well_being_student":"well_being_please_select_well_being_homeowner";return Object(x.jsxs)(a,{children:[U&&Object(x.jsx)(j.a,{}),N&&Object(x.jsx)(ct,{retry:V}),S&&Object(x.jsx)(Re.a,{maxWidth:"sm",sx:{paddingTop:3},disableGutters:!0,children:Object(x.jsxs)(xc.a,{value:K,children:[Object(x.jsx)(fc.a,{value:"0",children:Object(x.jsxs)(ie.a,{variant:"outlined",sx:{p:2},children:[Object(x.jsx)(E.a,{variant:"h5",children:i("well_being_question_home")}),Object(x.jsx)(v.a,{mt:5}),Object(x.jsxs)(Ue.a,{direction:"row",sx:{justifyContent:"flex-end",pt:2},children:[Object(x.jsx)(fe.a,{variant:"contained",onClick:function(){return L("1")},children:i("yes")}),Object(x.jsx)(fe.a,{sx:{marginLeft:2},variant:"contained",onClick:function(){return L("2")},children:i("no")})]})]})}),Object(x.jsxs)(fc.a,{value:"1",children:[Object(x.jsx)(E.a,{variant:"h5",align:"center",paragraph:!0,children:i(te)}),Object(x.jsx)(ie.a,{variant:"outlined",sx:{p:2},children:Object(x.jsx)(yn.b,{data:X,options:$,height:100,width:100})})]}),Object(x.jsx)(fc.a,{value:"2",children:Object(x.jsxs)(ie.a,{square:!0,variant:"outlined",sx:{p:2},children:[Object(x.jsx)(E.a,{variant:"h5",children:i("well_being_come_back_later")}),Object(x.jsx)(v.a,{mt:5}),Object(x.jsx)(Ue.a,{direction:"row",sx:{justifyContent:"flex-end",pt:2},children:Object(x.jsx)(fe.a,{variant:"contained",component:d.b,to:"/",children:i("go_back")})})]})})]})}),Object(x.jsx)(I.a,{when:W,message:i("unsaved_changes")}),Object(x.jsx)(Qe,Object(r.a)({title:i("info"),content:ee},u)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},p),{},{severity:"success"})),Object(x.jsx)(f,Object(r.a)({},y))]})};function vc(e){return Object(x.jsxs)(I.e,{children:[Object(x.jsx)(I.c,{path:"/verify",children:Object(x.jsx)(hc,Object(r.a)({},e))}),Object(x.jsx)(I.c,{exact:!0,path:"/login",children:Object(x.jsx)(zn,Object(r.a)({},e))}),Object(x.jsx)(I.c,{exact:!0,path:"/",children:Object(x.jsx)(zn,Object(r.a)({},e))}),Object(x.jsx)(I.c,{exact:!0,path:"".concat("/GameOpSysReactApp","/"),children:Object(x.jsx)(zn,Object(r.a)({},e))}),Object(x.jsx)(I.c,{children:Object(x.jsx)(Un,{})})]})}function gc(e){return Object(x.jsxs)(I.e,{children:[Object(x.jsx)(I.c,{path:"/logout",children:Object(x.jsx)(Rn,Object(r.a)({},e))}),",",Object(x.jsx)(I.c,{children:Object(x.jsx)(Tn,Object(r.a)({},e))}),","]})}function kc(e){var t=Object(c.useContext)(Sc);if(void 0===t)return Object(x.jsx)(j.a,{});var n=function(){return Object(x.jsx)(I.c,{path:"/upload",children:Object(x.jsx)(Xn,Object(r.a)({},e))})},a=function(){return Object(x.jsx)(I.c,{path:"/user",children:Object(x.jsx)(dc,Object(r.a)({},e))})},o=function(){return Object(x.jsx)(I.c,{path:"/archive",children:Object(x.jsx)(rt,Object(r.a)({},e))})},i=function(){return Object(x.jsx)(I.c,{path:"/consumers",children:Object(x.jsx)(fn,Object(r.a)({},e))})},s=function(){return Object(x.jsx)(I.c,{path:"/behavior",children:Object(x.jsx)(an,Object(r.a)({},e))})},l=function(){return Object(x.jsx)(I.c,{path:"/pastbehavior",children:Object(x.jsx)(Gn,Object(r.a)({},e))})},u=function(){return Object(x.jsx)(I.c,{path:"/wellBeing",children:Object(x.jsx)(mc,Object(r.a)({},e))})},d=function(){return Object(x.jsx)(I.c,{path:"/feedback",children:Object(x.jsx)(wn,Object(r.a)({},e))})},b=function(){return Object(x.jsx)(I.c,{exact:!0,path:"/",children:Object(x.jsx)(Sn,Object(r.a)({},e))})},O=function(){return Object(x.jsx)(I.c,{exact:!0,path:"".concat("/GameOpSysReactApp","/"),children:Object(x.jsx)(Sn,Object(r.a)({},e))})},h=[function(){return Object(x.jsx)(I.c,{path:"/logout",children:Object(x.jsx)(Rn,Object(r.a)({},e))})}(),a(),O(),b(),o(),i(),s(),u(),l(),d()],f=[n()];return Object(x.jsxs)(I.e,{children:["homeowner"===t.type&&f,h,Object(x.jsx)(I.c,{children:Object(x.jsx)(Un,{})})]})}var yc=n(539),_c=n(550);function wc(e){return e.data.data}var Cc=new(function(){function e(t){var n=this;Object(_e.a)(this,e),this.accessToken=void 0,this.isLoggedInObservable=void 0,this.backend=void 0,this.backend=t,this.accessToken=new yc.a(localStorage.getItem("token")),this.isLoggedInObservable=this.accessToken.pipe(Object(_c.a)((function(e){return null!=e&&""!==e}))),window.addEventListener("storage",(function(){var e=localStorage.getItem("token");e!==n.accessToken.value&&n.accessToken.next(e)}))}return Object(we.a)(e,[{key:"isLoggedIn",value:function(){return this.isLoggedInObservable}},{key:"requestPin",value:function(e,t){return this.backend.get("/request-pin",{params:{code:e,email:t}})}},{key:"login",value:function(e,t){var n=this;return this.backend.get("/login",{params:{email:e,otp:t}}).then(wc).then((function(e){var t=e.token;localStorage.setItem("token",t),n.accessToken.next(t)}))}},{key:"logout",value:function(){var e=this;return this.backend.get("/logout",this.addAuth()).finally((function(){localStorage.removeItem("token"),e.accessToken.next(null)}))}},{key:"getUser",value:function(){return this.backend.get("/user",this.addAuth()).then(wc)}},{key:"getConsumers",value:function(){return this.backend.get("/consumers",this.addAuth()).then(wc)}},{key:"putConsumer",value:function(e){return this.backend.patch("/consumers/"+e.id,{data:{active:e.active}},this.addAuth())}},{key:"getAvailableEnergy",value:function(e){return this.backend.get("/available-energy/"+e,this.addAuth()).then(wc)}},{key:"getTasks",value:function(){return this.backend.get("/tasks",this.addAuth()).then(wc)}},{key:"getPredictions",value:function(){return this.backend.get("/predictions",this.addAuth()).then(wc)}},{key:"getPrediction",value:function(e){return this.backend.get("/predictions/"+e,this.addAuth()).then(wc)}},{key:"putPrediction",value:function(e,t){return this.backend.put("/predictions/"+e,{data:t},this.addAuth())}},{key:"getWellBeing",value:function(e){return this.backend.get("/well-being/"+e,this.addAuth()).then(wc)}},{key:"postWellBeing",value:function(e){return this.backend.post("/well-being",{data:e},this.addAuth())}},{key:"getFeedback",value:function(e){return this.backend.get("/feedback/"+e,this.addAuth()).then(wc)}},{key:"postConsumption",value:function(e){var t=ye.a.CancelToken.source(),n=new FormData;return n.append("upfile",e,e.name),{promise:this.backend.post("/consumptions",n,this.addAuth({cancelToken:t.token})),cancelToken:t}}},{key:"postTracking",value:function(e){return this.backend.post("/tracking",{data:e},{})}},{key:"addAuth",value:function(e){return Object(r.a)(Object(r.a)({},e),{},{headers:{Authorization:"".concat(this.accessToken.value)}})}}]),e}())(Ie.backend),Sc=a.a.createContext({id:"",email:"",type:"",location:""}),Ac=a.a.createContext({mode:void 0,toggleColorMode:function(e){}});var Tc=function(){var e=function(){var e=Object(oe.a)("(prefers-color-scheme: dark)"),t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useMemo)((function(){return{mode:a,toggleColorMode:r}}),[r,a]),s=a?"dark"===a:e;return[Object(c.useMemo)((function(){return Object(ve.a)({palette:{mode:s?"dark":"light",primary:{main:ge.a[600],contrastText:"#fff"},secondary:{main:ge.a[400]}},components:{MuiAppBar:{defaultProps:{elevation:s?1:0,color:"inherit"}},MuiUseMediaQuery:{defaultProps:{noSsr:!0}},MuiGrid:{defaultProps:{spacing:1}},MuiCard:{defaultProps:{variant:"outlined",square:!0}},MuiFab:{styleOverrides:{root:{position:"fixed",bottom:"10px",right:"10px"}}},MuiSnackbar:{styleOverrides:{anchorOriginBottomCenter:{"@media (max-width:599.95px)":{bottom:"70px"}}}}}})}),[s]),i]}(),t=Object(o.a)(e,2),n=t[0],O=t[1],h=Object(c.useState)(),p=Object(o.a)(h,2),m=p[0],v=p[1],g=Object(c.useState)(),k=Object(o.a)(g,2),y=k[0],_=k[1],w=me(),C=Object(o.a)(w,2),S=C[0],A=C[1],T=Object(c.useCallback)((function(e){return Cc.postTracking(e).catch(console.log)}),[]),B=Object(b.useTracking)({},{dispatch:T}).Track,E=function(){var e=Object(c.useState)({open:!1,message:"",callback:function(){}}),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useCallback)((function(e,t){return a({open:!0,message:e,callback:t})}),[]),s=Object(c.useCallback)((function(e){a((function(t){return t.callback(e),Object(r.a)(Object(r.a)({},t),{},{open:!1})}))}),[]);return[{open:n.open,onAccept:function(){return s(!0)},onClose:function(){return s(!1)},message:n.message},i]}(),W=Object(o.a)(E,2),F=W[0],M=W[1],D=Object(c.useState)(0),I=Object(o.a)(D,2),P=I[0],K=I[1],L=Object(c.useCallback)((function(){return K((function(e){return e+1}))}),[]),z=m;Object(c.useEffect)((function(){Cc.isLoggedIn().subscribe((function(e){return _(e)}))}),[]),Object(c.useEffect)((function(){y?Cc.getUser().then(v,A).catch(console.error):v(void 0)}),[y,A,P]);var R=Object(c.useState)({title:"",showBackButton:!1,children:function(){return Object(x.jsx)(x.Fragment,{})}}),U=Object(o.a)(R,2),q=U[0],N=U[1];return Object(x.jsxs)(l.a,{theme:n,children:[Object(x.jsx)(u.a,{}),void 0!==y&&Object(x.jsx)(a.a.Suspense,{fallback:Object(x.jsx)(j.a,{}),children:Object(x.jsx)(Ac.Provider,{value:O,children:Object(x.jsxs)(d.a,{basename:"".concat("/GameOpSysReactApp","#"),getUserConfirmation:M,children:[!y&&Object(x.jsx)(vc,{backendService:Cc}),y&&z&&Object(x.jsx)(Sc.Provider,{value:m,children:Object(x.jsxs)(B,{children:[Object(x.jsxs)(ne,{children:[Object(x.jsx)(ae,{title:q.title,hideBackButton:!q.showBackButton,children:q.children()}),Object(x.jsx)(ee,{}),Object(x.jsx)(te,{children:Object(x.jsx)(i.a,{dateAdapter:s.a,children:Object(x.jsx)(kc,{backendService:Cc,setAppBar:N})})})]}),Object(x.jsx)(ue,{})]})}),y&&!z&&Object(x.jsx)(gc,{backendService:Cc,retry:L}),Object(x.jsx)(pe,Object(r.a)({},F)),Object(x.jsx)(f,Object(r.a)(Object(r.a)({},S),{},{severity:"error"}))]})})})]})},Bc=n(85),Ec=n.n(Bc),Wc=n(126),Fc=n(273),Mc=n.n(Fc),Dc=n(274),Ic=n(110),Pc=n(540),Kc=n(277),Lc={en:Ic.a,de:Pc.a},zc=Mc()((function(e,t,c){n(448)("./".concat(e,"/").concat(t,".json")).then((function(e){return c(null,e)})).catch((function(e){return c(e,null)}))}));ic.a.use(zc).use(Dc.a).use(Wc.e).init({fallbackLng:"en",interpolation:{escapeValue:!1,format:function(e,t,n){if(e instanceof Date)try{return Object(Kc.a)(e,t,{locale:Lc[n]})}catch(c){console.error(c)}return e}},backend:{loadPath:"".concat("/GameOpSysReactApp","/locales/{{lng}}/{{ns}}.json")}});ic.a,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Rc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,593)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};Ec.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Tc,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Rc()}},[[449,1,2]]]);
//# sourceMappingURL=main.1cb638dc.chunk.js.map